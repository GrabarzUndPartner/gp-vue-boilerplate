import{p as c,u as q}from"./Ch8b2LOb.js";import{c as a,d as b,ac as x,f as v,v as A,i as N,o as w,e as B,m as I,n as m,a as S,ae as C,U as E,a5 as L,k as j,M as P}from"./BxdDJQul.js";import"./C-6OrCBs.js";function U(e){var s;(s=performance==null?void 0:performance.mark)==null||s.call(performance,"mark_feature_usage",{detail:{feature:e}})}const O={src:{type:String,required:!1},format:{type:String,required:!1},quality:{type:[Number,String],required:!1},background:{type:String,required:!1},fit:{type:String,required:!1},modifiers:{type:Object,required:!1},preset:{type:String,required:!1},provider:{type:String,required:!1},sizes:{type:[Object,String],required:!1},densities:{type:String,required:!1},preload:{type:[Boolean,Object],required:!1},width:{type:[String,Number],required:!1},height:{type:[String,Number],required:!1},alt:{type:String,required:!1},referrerpolicy:{type:String,required:!1},usemap:{type:String,required:!1},longdesc:{type:String,required:!1},ismap:{type:Boolean,required:!1},loading:{type:String,required:!1,validator:e=>["lazy","eager"].includes(e)},crossorigin:{type:[Boolean,String],required:!1,validator:e=>["anonymous","use-credentials","",!0,!1].includes(e)},decoding:{type:String,required:!1,validator:e=>["async","auto","sync"].includes(e)},nonce:{type:[String],required:!1}},R=e=>{const s=a(()=>({provider:e.provider,preset:e.preset})),r=a(()=>({width:c(e.width),height:c(e.height),alt:e.alt,referrerpolicy:e.referrerpolicy,usemap:e.usemap,longdesc:e.longdesc,ismap:e.ismap,crossorigin:e.crossorigin===!0?"anonymous":e.crossorigin||void 0,loading:e.loading,decoding:e.decoding,nonce:e.nonce})),d=q(),i=a(()=>({...e.modifiers,width:c(e.width),height:c(e.height),format:e.format,quality:e.quality||d.options.quality,background:e.background,fit:e.fit}));return{options:s,attrs:r,modifiers:i}},W={...O,placeholder:{type:[Boolean,String,Number,Array],required:!1},placeholderClass:{type:String,required:!1}},$=["src"],M=b({__name:"NuxtImg",props:W,emits:["load","error"],setup(e,{emit:s}){const r=e,d=x(),i=s,l=!1,h=q(),n=R(r),f=v(!1),u=v(),g=a(()=>h.getSizes(r.src,{...n.options.value,sizes:r.sizes,densities:r.densities,modifiers:{...n.modifiers.value,width:c(r.width),height:c(r.height)}})),z=a(()=>{const t={...n.attrs.value,"data-nuxt-img":""};return(!r.placeholder||f.value)&&(t.sizes=g.value.sizes,t.srcset=g.value.srcset),t}),p=a(()=>{let t=r.placeholder;if(t===""&&(t=!0),!t||f.value)return!1;if(typeof t=="string")return t;const o=Array.isArray(t)?t:typeof t=="number"?[t,t]:[10,10];return h(r.src,{...n.modifiers.value,width:o[0],height:o[1],quality:o[2]||50,blur:o[3]||3},n.options.value)}),y=a(()=>r.sizes?g.value.src:h(r.src,n.modifiers.value,n.options.value)),_=a(()=>p.value?p.value:y.value),k=A().isHydrating;return N(()=>{if(p.value){const t=new Image;y.value&&(t.src=y.value),r.sizes&&(t.sizes=g.value.sizes||"",t.srcset=g.value.srcset),t.onload=o=>{f.value=!0,i("load",o)},U("nuxt-image");return}u.value&&(u.value.complete&&k&&(u.value.getAttribute("data-error")?i("error",new Event("error")):i("load",new Event("load"))),u.value.onload=t=>{i("load",t)},u.value.onerror=t=>{i("error",t)})}),(t,o)=>(w(),B("img",I({ref_key:"imgEl",ref:u,class:r.placeholder&&!f.value?r.placeholderClass:void 0},{...m(l)?{onerror:"this.setAttribute('data-error', 1)"}:{},...z.value,...m(d)},{src:_.value}),null,16,$))}}),G=b({__name:"ProseImg",props:{src:{type:String,default:""},alt:{type:String,default:""},width:{type:[String,Number],default:void 0},height:{type:[String,Number],default:void 0}},setup(e){const s=S().public.mdc.useNuxtImage?M:"img",r=e,d=a(()=>{var i;if((i=r.src)!=null&&i.startsWith("/")&&!r.src.startsWith("//")){const l=C(E(S().app.baseURL));if(l!=="/"&&!r.src.startsWith(l))return L(l,r.src)}return r.src});return(i,l)=>(w(),j(P(m(s)),{src:m(d),alt:e.alt,width:e.width,height:e.height},null,8,["src","alt","width","height"]))}});export{G as default};
