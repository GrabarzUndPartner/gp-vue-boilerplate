var fe=Object.defineProperty;var ge=(i,e,t)=>e in i?fe(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t;var g=(i,e,t)=>ge(i,typeof e!="symbol"?e+"":e,t);import{i as pe,am as ve,P as ye,a8 as we,an as _e,_ as ee,X as te,H as W,j as v,l as w,ao as Q,f as E,D as se,c as R,o as B,m as $e,u as U,a as Se,F as xe,z as Be,d as re,A as V,s as C,E as ze}from"./xL0OVFL7.js";import{t as T,u as J,a as Ae,b as Me}from"./DWqv5ScE.js";import{g as ie}from"./PnDygVHQ.js";import{u as q}from"./C5SrRyld.js";function Ne(i){return new URL(window.location.href)}const Pe=pe({name:"HydrationWrapper",setup(i,{slots:e}){const t=e.default?e.default():[];return()=>Fe(t)}}),Fe=i=>i.length===1?i[0]:i,X=["avif","webp","png","jpg","gif"],Oe="jpg",Ce=i=>{const{pathname:e}=we(i),n=(_e(e,{strict:!1})||"").match(/\.([^.]+)$/),s=n?n[1]:"";return s&&X.includes(s)||X.includes(s)?s:Oe};async function ke(i,e,t){window.Image?i=i.modify({src:e}):i=i.modify({src:ye(e)?e:ve(e,Ne().origin)});const{width:n,height:s}=await t.getImageSize(i.src);return i.modify({width:n,height:s})}class _{constructor({src:e,sizes:t,width:n,height:s,media:r="all",quality:d=70,format:m=void 0,preload:c=!1,modifiers:l={},provider:u=void 0,preset:a=void 0,densities:o=void 0}){g(this,"src");g(this,"media");g(this,"sizes");g(this,"width");g(this,"height");g(this,"format");g(this,"quality");g(this,"preload");g(this,"modifiers");g(this,"provider");g(this,"preset");g(this,"densities");this.src=e,this.sizes=t,this.media=r,this.width=n,this.height=s,this.format=Le(e,m),this.quality=d,this.preload=c||!1,this.modifiers=l,this.provider=u,this.preset=a,this.densities=o}get key(){return T(JSON.stringify(this.toJSON()))}get ratio(){return(this.width??0)/(this.height??0)}get className(){return`image-${T(ne(this.src))}`}get style(){return`
      @supports (aspect-ratio: 1) {
        @media ${this.media} { .${this.className} { aspect-ratio: ${this.width} / ${this.height}; } }
      }
    `}getModifiers(){return{...this.modifiers,format:this.format,quality:this.quality}}getOptions(e){return{provider:this.provider,preset:this.preset,densities:this.densities||e.densities}}getMeta(e,t){return ke(new _({...this.toJSON()}),e,t)}getPreload(e,t,n){return{rel:"preload",as:"image",imagesrcset:e,imagesizes:t,media:this.media,crossorigin:n}}modify(e){return new _({...this.toJSON(),...e})}toJSON(){return{src:this.src,sizes:this.sizes,media:this.media,width:this.width,height:this.height,format:this.format,quality:this.quality,preload:this.preload,modifiers:this.modifiers,provider:this.provider,preset:this.preset,densities:this.densities}}static create(...e){return new this(...e)}}function Le(i,e){const t=Ce(i);return e!=null&&e.includes(t)?t:e||t}function ne(i){if(i.startsWith("/"))return i;const e=new URL(i);return e.pathname+e.search+e.hash}function oe(i){return["anonymous","use-credentials",void 0].includes(i)}const Ie={source:{type:[_,Object],default:null},title:{type:String,required:!0},alt:{type:String,default:null},crossorigin:{type:[Boolean,String],default(){},validator:oe}};var Y={};const Re=["srcset","sizes","width","height","title","alt","loading","decoding","crossorigin"],je=Object.assign({inheritAttrs:!1},{__name:"Base",props:Ie,emits:["load"],async setup(i,{emit:e}){let t,n;const s=te(),r=i,d=e,m=q(),c=W().$booster,{isCritical:l}=J(),u=v(!0),a=v(),o=v(),p=v(),P=v(),F=v(),z=w(()=>ie(r.crossorigin||c.crossorigin)),H=w(()=>{var A;const f={loading:u.value};return(A=p.value)!=null&&A.className&&(f[p.value.className]=!0),f}),h=w(()=>{var f;return s.width||((f=a.value)==null?void 0:f.width)}),x=w(()=>{var f;return s.height||((f=a.value)==null?void 0:f.height)}),O=w(()=>l.value?"eager":"lazy"),he=w(()=>!r.source||new _(r.source).format!=="svg"?"async":"sync");function me(f){u.value=!1,d("load",f.target)}if(r.source){p.value=Q(new _(r.source)),o.value=m.getSizes(p.value.src,{sizes:p.value.sizes,modifiers:p.value.getModifiers(),...p.value.getOptions(c)}),P.value=o.value.srcset||o.value.src,F.value=o.value.sizes;const f=v({});if(E(()=>f.value),o.value&&o.value.src){try{a.value=Q(([t,n]=se(()=>p.value.getMeta(o.value.src,c)),t=await t,n(),t))}catch(A){console.error(A)}f.value={style:[a.value&&Ae(p.value)].filter(Boolean),link:[!(!o.value||!l.value)&&Y.prerender&&p.value.getPreload(o.value.srcset,o.value.sizes,z.value)].filter(Boolean),noscript:[Y.prerender&&{key:"img-nojs",children:"<style>img { content-visibility: unset !important; }</style>"}].filter(Boolean)}}}else u.value=!1;return(f,A)=>(B(),R("img",$e(U(s),{srcset:P.value,sizes:F.value,width:h.value,height:x.value,class:["nuxt-booster-image",H.value],title:f.title,alt:f.alt||f.title,loading:O.value,decoding:he.value,crossorigin:z.value,onLoad:me}),null,16,Re))}}),He=ee(je,[["__scopeId","data-v-03237f8f"]]),ae=/(!?\(\s*min(-device)?-width)(.|\n)+\(\s*max(-device)?-width|\(\s*width\s*>(=)?(.|\n)+\(\s*width\s*<(=)?|(!?\(.*<(=)?\s*width\s*<(=)?)/i,Te=/\(\s*min(-device)?-width|\(\s*width\s*>(=)?/i,ce=/(!?\(\s*max(-device)?-width)(.|\n)+\(\s*min(-device)?-width|\(\s*width\s*<(=)?(.|\n)+\(\s*width\s*>(=)?|(!?\(.*>(=)?\s*width\s*>(=)?)/i,We=/\(\s*max(-device)?-width|\(\s*width\s*<(=)?/i,M=j(ae,ce,Te),k=j(ce,ae,We),le=/(!?\(\s*min(-device)?-height)(.|\n)+\(\s*max(-device)?-height|\(\s*height\s*>(=)?(.|\n)+\(\s*height\s*<(=)?|(!?\(.*<(=)?\s*height\s*<(=)?)/i,Ee=/\(\s*min(-device)?-height|\(\s*height\s*>(=)?/i,ue=/(!?\(\s*max(-device)?-height)(.|\n)+\(\s*min(-device)?-height|\(\s*height\s*<(=)?(.|\n)+\(\s*height\s*>(=)?|(!?\(.*>(=)?\s*height\s*>(=)?)/i,Ue=/\(\s*max(-device)?-height|\(\s*height\s*<(=)?/i,N=j(le,ue,Ee),L=j(ue,le,Ue),$=/<(?!=)/,S=/>(?!=)/,G=/print/i,K=/^print$/i,y=Number.MAX_VALUE;function I(i){let e=/(-?\d*\.?\d+)(ch|em|ex|px|rem)/.exec(i);if(e===null&&(M(i)||N(i))&&(e=/(\d)/.exec(i)),e==="0")return 0;if(e===null)return y;let t=e[1];switch(e[2]){case"ch":t=parseFloat(t)*8.8984375;break;case"em":case"rem":t=parseFloat(t)*16;break;case"ex":t=parseFloat(t)*8.296875;break;case"px":t=parseFloat(t);break}return+t}function j(i,e,t){return function(n){let s;return i.test(n)?s=!0:e.test(n)?s=!1:s=t.test(n),n.includes("not")?!s:s}}function Z(i,e){const t=G.test(i),n=K.test(i),s=G.test(e),r=K.test(e);return t&&s?!n&&r?1:n&&!r?-1:i.localeCompare(e):t?1:s?-1:null}function Je(i){const t={}.unitlessMqAlwaysFirst;function n(s,r){const d=Z(s,r);if(d!==null)return d;const m=M(s)||N(s),c=k(s)||L(s),l=M(r)||N(r),u=k(r)||L(r);if(t&&(!m&&!c||!l&&!u))return!m&&!c&&!l&&!u?s.localeCompare(r):!l&&!u?1:-1;{if(m&&u)return-1;if(c&&l)return 1;const a=I(s),o=I(r);if(a===y&&o===y)return s.localeCompare(r);if(a===y)return 1;if(o===y)return-1;if(a>o)return c?-1:1;if(a<o)return c?1:-1;if(a===o){if(c&&u){if($.test(s)&&!$.test(r))return 1;if(!$.test(s)&&$.test(r))return-1}if(m&&l){if(S.test(s)&&!S.test(r))return 1;if(!S.test(s)&&S.test(r))return-1}}return s.localeCompare(r)}}return n.desktopFirst=function(s,r){const d=Z(s,r);if(d!==null)return d;const m=M(s)||N(s),c=k(s)||L(s),l=M(r)||N(r),u=k(r)||L(r);if(t&&(!m&&!c||!l&&!u))return!m&&!c&&!l&&!u?s.localeCompare(r):!l&&!u?1:-1;{if(m&&u)return 1;if(c&&l)return-1;const a=I(s),o=I(r);if(a===y&&o===y)return s.localeCompare(r);if(a===y)return 1;if(o===y)return-1;if(a>o)return c?-1:1;if(a<o)return c?1:-1;if(a===o){if(c&&u){if($.test(s)&&!$.test(r))return 1;if(!$.test(s)&&$.test(r))return-1}if(m&&l){if(S.test(s)&&!S.test(r))return 1;if(!S.test(s)&&S.test(r))return-1}}return-s.localeCompare(r)}},n}const qe=Je();class D{constructor(e,t={}){g(this,"list",[]);g(this,"sort",!1);t=t||{},this.sort=t.sort||!1,this.list=this.list.concat(Array.from(e||this.list).map(n=>new _(n)))}get length(){return this.list.length}[Symbol.iterator](){return this.list.values()}get key(){return this.list.map(e=>e.key).join("-")}get sorted(){return this.sort?this.list.sort((e,t)=>qe(e.media||"",t.media||"")):this.list}get style(){return this.list.map(({media:e,width:t,height:n,style:s})=>`
      @media ${e} { .${this.className}::before { padding-top: calc((1 / (${t} / ${n})) * 100%); } }
      @supports (aspect-ratio: 1) {
        @media ${e} { .${this.className} { aspect-ratio: ${t} / ${n}; } }
      }
      ${s}
    `).reverse().join(" ")}get className(){return`picture-${T(this.sorted.map(({src:e})=>ne(e)).join(","))}`}get classNames(){return{picture:this.className,image:this.list.map(e=>e.className)}}getFormats(e,t,n){return this.sorted.reduce((s,r)=>s.concat(e.map(d=>r.modify({format:d,preload:d.includes(t)&&n}))),[])}async getMeta(e,t){const n=await Promise.all(this.sorted.map(s=>{const r=e.getSizes(s.src,{sizes:s.sizes,modifiers:s.getModifiers(),...s.getOptions(t)});return r.src?s.getMeta(r.src,t):(console.warn("No src found for source",s),s)}).filter(Boolean));return new D(n)}toJSON(){return this.list}static create(...e){return new this(...e)}}var De={};const Qe=["srcset","sizes","media","type"],Ve={__name:"Source",props:{source:{type:_,required:!0},crossorigin:{type:[Boolean,String],default(){return null},validator:i=>["anonymous","use-credentials","",!0,!1,void 0].includes(i)}},setup(i){const e=new Map([["jpg","jpeg"]]),t=i,n=q(),s=W().$booster,r=n.getSizes(t.source.src,{sizes:t.source.sizes,modifiers:t.source.getModifiers(),...t.source.getOptions(s)}),d=v(r.srcset||r.src),m=v(t.source.format&&`image/${e.get(t.source.format)||t.source.format}`),c=w(()=>ie(t.crossorigin||s.crossorigin)),l=new _(t.source);return E(()=>({link:r&&l.preload&&d.value&&De.prerender?[l.getPreload(d.value,r.sizes,c.value)]:[]})),(u,a)=>(B(),R("source",{srcset:d.value,sizes:U(r).sizes,media:i.source.media,type:m.value},null,8,Qe))}},de={sources:{type:Array,default(){return[]}},formats:{type:Array,default(){return null}},title:{type:String,default:null},alt:{type:String,default:null},crossorigin:{type:[Boolean,String],default(){return null},validator:oe},sortSources:{type:Boolean,default:!0}},Xe={__name:"Base",props:de,emits:["load"],async setup(i,{emit:e}){let t,n;const s=["avif","webp","png","jpg","gif"],r=i,d=e,{isCritical:m}=J(),c=q(),l=W().$booster,u=D.create(r.sources,{sort:r.sortSources}),a=v(),o=r.formats||l.targetFormats,p=Array.from(new Set(s.map(h=>o.find(x=>x.includes(h))))).filter(Boolean),P=s.find(h=>o.find(x=>x.includes(h))),F=v(u.getFormats(p,P,m.value)),z=w(()=>{var h;return((h=a.value)==null?void 0:h.classNames)||{picture:"",image:[]}}),H=h=>{d("load",h)};E(()=>{if(a.value&&a.value.length){const h=a.value.classNames;return{style:[Me(a.value,h)]}}return{}});try{a.value=([t,n]=se(()=>u.getMeta(c,l)),t=await t,n(),t)}catch(h){console.error(h)}return(h,x)=>(B(),R("picture",{class:V([z.value.picture,"nuxt-booster-picture"])},[(B(!0),R(xe,null,Be(F.value,O=>(B(),re(Ve,{key:O.key,source:O,crossorigin:h.crossorigin},null,8,["source","crossorigin"]))),128)),Se(He,{class:V(z.value.image),title:h.title,alt:h.alt,crossorigin:h.crossorigin,width:"0",height:"0",onLoad:H},null,8,["class","title","alt","crossorigin"])],2))}},b=ee(Xe,[["__scopeId","data-v-9b43e68c"]]),et={__name:"BoosterPicture",props:{hydrate:{type:Boolean,default:!0},...de},setup(i){const e=i,t=te(),{isCritical:n}=J(),s=w(()=>e.hydrate?C(b,{...t,...e,hydrate:void 0,critical:n.value}):C(Pe,{},[C("noscript",{class:"nuxt-booster-picture-noscript"},[C(b,{...t,...e,hydrate:void 0,critical:e.hydrate})])]));return(r,d)=>(B(),re(ze(U(s))))}};export{et as _};
