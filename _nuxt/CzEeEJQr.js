var de=Object.defineProperty;var he=(r,e,t)=>e in r?de(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var g=(r,e,t)=>he(r,typeof e!="symbol"?e+"":e,t);import{d as me,N as fe,am as ge,a0 as pe,_ as b,X as ve,D as J,a as p,k as S,an as Q,s as U,y as ee,o as A,c as I,m as ye,u as R,F as we,B as _e,f as $e,V,e as Se,J as P}from"./BMzG3_Vl.js";import{t as W,u as q,b as xe,c as Be}from"./BxgRdn_n.js";import{g as te}from"./CRVO8YTy.js";import{u as E}from"./CqMUvA3c.js";function ze(r){return new URL(window.location.href)}const Me=me({name:"HydrationWrapper",setup(r,{slots:e}){return()=>Ae(e.default())}}),Ae=r=>r.length===1?r[0]:r,Ne=["avif","webp","png","jpg","gif"],Fe="jpg",Oe=r=>{const{pathname:e}=pe(r),t=/[.]/.exec(e)&&/[^.]+$/.exec(e)[0];return Ne.includes(t)?t:Fe};async function Pe(r,e,t){window.Image?r=r.modify({src:e}):r=r.modify({src:fe(e)?e:ge(e,ze().origin)});const{width:n,height:s}=await t.getImageSize(r.src);return r.modify({width:n,height:s})}class w{constructor({src:e,sizes:t,width:n,height:s,media:i="all",quality:h=70,format:m=null,preload:l=!1,modifiers:c={},provider:u=void 0,preset:o=void 0,densities:a=void 0}){g(this,"src",null);g(this,"sizes",null);g(this,"media",null);g(this,"width",null);g(this,"height",null);g(this,"format",null);g(this,"quality",null);g(this,"preload",!1);g(this,"modifiers",{});g(this,"provider");g(this,"preset");g(this,"densities");this.src=e,this.sizes=t,this.media=i,this.width=n,this.height=s,this.format=Ce(e,m),this.quality=h,this.preload=l,this.modifiers=c,this.provider=u,this.preset=o,this.densities=a}get key(){return W(JSON.stringify(this.toJSON()))}get ratio(){return this.width/this.height}get className(){return`image-${W(se(this.src))}`}get style(){return`
      @supports (aspect-ratio: 1) {
        @media ${this.media} { .${this.className} { aspect-ratio: ${this.width} / ${this.height}; } }
      }
    `}getModifiers(){return{...this.modifiers,format:this.format,quality:this.quality}}getOptions(e){return{provider:this.provider,preset:this.preset,densities:this.densities||e.densities}}getMeta(e,t){return Pe(new w({...this.toJSON()}),e,t)}getPreload(e,t,n){const s={rel:"preload",as:"image",imagesrcset:e,imagesizes:t,media:this.media};return n&&(s.crossorigin=n),s}modify(e){return new w({...this.toJSON(),...e})}toJSON(){return{src:this.src,sizes:this.sizes,media:this.media,width:this.width,height:this.height,format:this.format,quality:this.quality,preload:this.preload,modifiers:this.modifiers,provider:this.provider,preset:this.preset,densities:this.densities}}static create(...e){return new this(...e)}}function Ce(r,e){const t=Oe(r);return e!=null&&e.includes(t)?t:e||t}function se(r){if(r.startsWith("/"))return r;const e=new URL(r);return e.pathname+e.search+e.hash}function ie(r){return["anonymous","use-credentials"].includes(r)}const ke={source:{type:[w,Object],default:null},title:{type:String,required:!0},alt:{type:String,default:null},crossorigin:{type:[Boolean,String],default(){return null},validator:ie}};var X={};const Le=["srcset","sizes","width","height","title","alt","loading","decoding","crossorigin"],Ie=Object.assign({inheritAttrs:!1},{__name:"Base",props:ke,emits:["load"],async setup(r,{emit:e}){let t,n;const s=ve(),i=r,h=e,m=E(),l=J().$booster,{isCritical:c}=q(),u=p(!0),o=p(null),a=p(null),v=p(null),N=p(null),F=p(null),B=S(()=>te(i.crossorigin||l.crossorigin)),T=S(()=>{var f;return[{loading:u.value}].concat((f=v.value)==null?void 0:f.className)}),d=S(()=>{var f;return s.width||((f=o.value)==null?void 0:f.width)}),x=S(()=>{var f;return s.height||((f=o.value)==null?void 0:f.height)}),O=S(()=>c.value?"eager":"lazy"),ce=S(()=>!i.source||new w(i.source).format!=="svg"?"async":"sync"),ue=f=>{u.value=!1,h("load",f.target)};if(i.source){v.value=Q(new w(i.source)),a.value=m.getSizes(v.value.src,{sizes:v.value.sizes,modifiers:v.value.getModifiers(),...v.value.getOptions(l)}),N.value=a.value.srcset||a.value.src,F.value=a.value.sizes;const f=p({});U(()=>f.value);try{o.value=Q(([t,n]=ee(()=>v.value.getMeta(a.value.src,l)),t=await t,n(),t))}catch(D){console.error(D)}f.value={style:[o.value&&xe(v.value)].filter(Boolean),link:[!(!a.value||!c.value)&&X.prerender&&v.value.getPreload(a.value.srcset,a.value.sizes,B.value)].filter(Boolean),noscript:[X.prerender&&{key:"img-nojs",children:`<style>
img{content-visibility:unset!important}
</style>`}].filter(Boolean)}}else u.value=!1;return(f,D)=>(A(),I("img",ye(R(s),{srcset:N.value,sizes:F.value,width:d.value,height:x.value,class:["nuxt-booster-image",T.value],title:f.title,alt:f.alt||f.title,loading:O.value,decoding:ce.value,crossorigin:B.value,onLoad:ue}),null,16,Le))}}),Re=b(Ie,[["__scopeId","data-v-e7ed0ca7"]]),re=/(!?\(\s*min(-device)?-width)(.|\n)+\(\s*max(-device)?-width|\(\s*width\s*>(=)?(.|\n)+\(\s*width\s*<(=)?|(!?\(.*<(=)?\s*width\s*<(=)?)/i,je=/\(\s*min(-device)?-width|\(\s*width\s*>(=)?/i,ne=/(!?\(\s*max(-device)?-width)(.|\n)+\(\s*min(-device)?-width|\(\s*width\s*<(=)?(.|\n)+\(\s*width\s*>(=)?|(!?\(.*>(=)?\s*width\s*>(=)?)/i,He=/\(\s*max(-device)?-width|\(\s*width\s*<(=)?/i,z=j(re,ne,je),C=j(ne,re,He),oe=/(!?\(\s*min(-device)?-height)(.|\n)+\(\s*max(-device)?-height|\(\s*height\s*>(=)?(.|\n)+\(\s*height\s*<(=)?|(!?\(.*<(=)?\s*height\s*<(=)?)/i,Te=/\(\s*min(-device)?-height|\(\s*height\s*>(=)?/i,ae=/(!?\(\s*max(-device)?-height)(.|\n)+\(\s*min(-device)?-height|\(\s*height\s*<(=)?(.|\n)+\(\s*height\s*>(=)?|(!?\(.*>(=)?\s*height\s*>(=)?)/i,We=/\(\s*max(-device)?-height|\(\s*height\s*<(=)?/i,M=j(oe,ae,Te),k=j(ae,oe,We),_=/<(?!=)/,$=/>(?!=)/,Y=/print/i,G=/^print$/i,y=Number.MAX_VALUE;function L(r){let e=/(-?\d*\.?\d+)(ch|em|ex|px|rem)/.exec(r);if(e===null&&(z(r)||M(r))&&(e=/(\d)/.exec(r)),e==="0")return 0;if(e===null)return y;let t=e[1];switch(e[2]){case"ch":t=parseFloat(t)*8.8984375;break;case"em":case"rem":t=parseFloat(t)*16;break;case"ex":t=parseFloat(t)*8.296875;break;case"px":t=parseFloat(t);break}return+t}function j(r,e,t){return function(n){let s;return r.test(n)?s=!0:e.test(n)?s=!1:s=t.test(n),n.includes("not")?!s:s}}function K(r,e){const t=Y.test(r),n=G.test(r),s=Y.test(e),i=G.test(e);return t&&s?!n&&i?1:n&&!i?-1:r.localeCompare(e):t?1:s?-1:null}function Je(r){const t={}.unitlessMqAlwaysFirst;function n(s,i){const h=K(s,i);if(h!==null)return h;const m=z(s)||M(s),l=C(s)||k(s),c=z(i)||M(i),u=C(i)||k(i);if(t&&(!m&&!l||!c&&!u))return!m&&!l&&!c&&!u?s.localeCompare(i):!c&&!u?1:-1;{if(m&&u)return-1;if(l&&c)return 1;const o=L(s),a=L(i);if(o===y&&a===y)return s.localeCompare(i);if(o===y)return 1;if(a===y)return-1;if(o>a)return l?-1:1;if(o<a)return l?1:-1;if(o===a){if(l&&u){if(_.test(s)&&!_.test(i))return 1;if(!_.test(s)&&_.test(i))return-1}if(m&&c){if($.test(s)&&!$.test(i))return 1;if(!$.test(s)&&$.test(i))return-1}}return s.localeCompare(i)}}return n.desktopFirst=function(s,i){const h=K(s,i);if(h!==null)return h;const m=z(s)||M(s),l=C(s)||k(s),c=z(i)||M(i),u=C(i)||k(i);if(t&&(!m&&!l||!c&&!u))return!m&&!l&&!c&&!u?s.localeCompare(i):!c&&!u?1:-1;{if(m&&u)return 1;if(l&&c)return-1;const o=L(s),a=L(i);if(o===y&&a===y)return s.localeCompare(i);if(o===y)return 1;if(a===y)return-1;if(o>a)return l?-1:1;if(o<a)return l?1:-1;if(o===a){if(l&&u){if(_.test(s)&&!_.test(i))return 1;if(!_.test(s)&&_.test(i))return-1}if(m&&c){if($.test(s)&&!$.test(i))return 1;if(!$.test(s)&&$.test(i))return-1}}return-s.localeCompare(i)}},n}const Ue=Je();class H{constructor(e,t={}){g(this,"list",[]);g(this,"sort",!1);t=t||{},this.sort=t.sort||!1,this.list=this.list.concat(Array.from(e||this.list).map(n=>new w(n)))}get length(){return this.list.length}[Symbol.iterator](){return this.list.values()}get key(){return this.list.map(e=>e.key).join("-")}get sorted(){return this.sort?this.list.sort((e,t)=>Ue(e.media,t.media)):this.list}get style(){return this.list.map(({media:e,width:t,height:n,style:s})=>`
      @media ${e} { .${this.className}::before { padding-top: calc((1 / (${t} / ${n})) * 100%); } }
      @supports (aspect-ratio: 1) {
        @media ${e} { .${this.className} { aspect-ratio: ${t} / ${n}; } }
      }
      ${s}
    `).reverse().join(" ")}get className(){return`picture-${W(this.sorted.map(({src:e})=>se(e)).join(","))}`}get classNames(){return{picture:this.className,image:this.list.map(e=>e.className)}}getFormats(e,t,n){return this.sorted.reduce((s,i)=>s.concat(e.map(h=>i.modify({format:h,preload:h.includes(t)&&n}))),[])}async getMeta(e,t){const n=await Promise.all(this.sorted.map(s=>{const i=e.getSizes(s.src,{sizes:s.sizes,modifiers:s.getModifiers(),...s.getOptions(t)});return s.getMeta(i.src,t)}));return new H(n)}toJSON(){return this.list}static create(...e){return new this(...e)}}var qe={};const Ee=["srcset","sizes","media","type"],De={__name:"Source",props:{source:{type:w,required:!0},crossorigin:{type:[Boolean,String],default(){return null},validator:r=>["anonymous","use-credentials","",!0,!1].includes(r)}},setup(r){const e=new Map([["jpg","jpeg"]]),t=r,n=E(),s=J().$booster,i=n.getSizes(t.source.src,{sizes:t.source.sizes,modifiers:t.source.getModifiers(),...t.source.getOptions(s)}),h=p(i.srcset||i.src),m=p(`image/${e.get(t.source.format)||t.source.format}`),l=p(te(t.crossorigin||s.crossorigin)),c=new w(t.source);return U({link:[i&&c.preload&&qe.prerender&&c.getPreload(h,i.sizes,l)].filter(Boolean)}),(u,o)=>(A(),I("source",{srcset:h.value,sizes:R(i).sizes,media:r.source.media,type:m.value},null,8,Ee))}},le={sources:{type:[Array,H],required:!0},formats:{type:Array,default(){return null}},title:{type:String,default:null},alt:{type:String,default:null},crossorigin:{type:[Boolean,String],default(){return null},validator:ie},sortSources:{type:Boolean,default:!0}},Qe={__name:"Base",props:le,emits:["load"],async setup(r,{emit:e}){let t,n;const s=["avif","webp","png","jpg","gif"],i=r,h=e,{isCritical:m}=q(),l=E(),c=J().$booster,u=H.create(i.sources,{sort:i.sortSources}),o=p(null),a=i.formats||c.targetFormats,v=Array.from(new Set(s.map(d=>a.find(x=>x.includes(d))))).filter(Boolean),N=s.find(d=>a.find(x=>x.includes(d))),F=p(u.getFormats(v,N,m)),B=S(()=>{var d;return((d=o.value)==null?void 0:d.classNames)||{}}),T=d=>{h("load",d)};U(()=>{if(o.value&&o.value.length){const d=o.value.classNames;return{style:[Be(o.value,d)]}}return{}});try{o.value=([t,n]=ee(()=>u.getMeta(l,c)),t=await t,n(),t)}catch(d){console.error(d)}return(d,x)=>(A(),I("picture",{class:V([B.value.picture,"nuxt-booster-picture"])},[(A(!0),I(we,null,_e(F.value,O=>(A(),Se(R(De),{key:O.key,source:O,crossorigin:d.crossorigin},null,8,["source","crossorigin"]))),128)),$e(R(Re),{class:V(B.value.image),title:d.title,alt:d.alt,crossorigin:d.crossorigin,width:"0",height:"0",onLoad:T},null,8,["class","title","alt","crossorigin"])],2))}},Z=b(Qe,[["__scopeId","data-v-afeddf24"]]),Ze={props:{hydrate:{type:Boolean,default:!0},...le},setup(){const{isCritical:r}=q();return{isCritical:r}},render(){return this.hydrate?P(Z,{...this.$attrs,...this.$props,hydrate:void 0,critical:this.isCritical}):P(Me,{},[P("noscript",{class:"nuxt-booster-picture-noscript"},[P(Z,{...this.$attrs,...this.$props,hydrate:void 0,critical:this.hydrate})])])}};export{Ze as _};
