var he=Object.defineProperty;var fe=(s,e,t)=>e in s?he(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t;var m=(s,e,t)=>fe(s,typeof e!="symbol"?e+"":e,t);import{t as E,u as W,b as me,c as ge}from"./w9pvnQXt.js";import{g as T,n as I,i as pe,au as ve,w as ye,av as we,aw as R,d as xe,ax as _e,ay as $e,c as x,z as Se,a6 as Be,ah as ze,ai as Ie,_ as Z,ae as ee,v as j,f as p,N as q,S as te,o as $,e as H,m as Ae,U as Me,T as Ne,k as se,F as Oe,ac as J,h as O}from"./DG4b5JLL.js";import{u as U}from"./CJ4blFof.js";import{g as re}from"./BQr1LURo.js";function Pe(s){return new URL(window.location.href)}function ke({willPerformHydration:s,hydrate:e,onCleanup:t},i=2e3){if(!s)return;if(!T())throw new Error("useHydrateWhenIdle must be called from the setup or lifecycle hook methods.");if(!("requestIdleCallback"in window)){e();return}const r=requestIdleCallback(()=>{e()},{timeout:i});t(()=>{cancelIdleCallback(r)})}function Ce({willPerformHydration:s,hydrate:e,onCleanup:t},i=["focus"]){if(!s)return;const r=T();if(!r||r.isMounted)throw new Error("useHydrateOnInteraction must be called from the setup method.");const n=I(i);pe(()=>{const c=ve(r),h=c.length>1?c[0].parentElement||document:c[0],u={capture:!0,once:!1,passive:!0},d=o=>{o.stopPropagation();const l=o.composedPath&&o.composedPath()||o.path;if(!l){let a=o.target;for(;a;){if(c.includes(a)){e();return}if(a===h)return;a=a.parentElement}return}c.forEach(a=>{l.includes(a)&&e()})};n.forEach(o=>{h.addEventListener(o,d,u)}),t(()=>{n.forEach(o=>{h.removeEventListener(o,d,u)})})})}function He({willPerformHydration:s,hydrate:e,onCleanup:t},i){if(!s)return;if(!T())throw new Error("useHydrateWhenTriggered must be called from the setup or lifecycle hook methods.");const r=ye(we(i)?i:()=>i,n=>{n&&e()},{immediate:!0});t(r)}const Q=s=>s.length===1?s[0]:s,Le=xe({name:"LazyHydrationWrapper",inheritAttrs:!1,suspensible:!1,props:{whenIdle:{default:!1,type:[Boolean,Number]},whenVisible:{default:!1,type:[Boolean,Object]},onInteraction:{default:!1,type:[Array,Boolean,String]},whenTriggered:{default:void 0,type:[Boolean,Object]}},emits:["hydrated"],setup(s,{slots:e,emit:t}){const i=_e();if(!i.willPerformHydration)return()=>Q(e.default());if(i.onHydrated(()=>t("hydrated")),s.whenIdle&&ke(i,s.whenIdle!==!0?s.whenIdle:void 0),s.whenVisible&&$e(i,s.whenVisible!==!0?s.whenVisible:void 0),s.onInteraction){let r;s.onInteraction!==!0&&(r=x(()=>Array.isArray(s.onInteraction)?s.onInteraction:[s.onInteraction]).value),Ce(i,r)}return s.whenTriggered!==void 0&&He(i,Se(s,"whenTriggered")),()=>Q(e.default())}}),be=R(Le);function ie(s){return["anonymous","use-credentials"].includes(s)}const Fe=["avif","webp","png","jpg","gif"],Ee="jpg",Re=s=>{const{pathname:e}=Ie(s),t=/[.]/.exec(e)&&/[^.]+$/.exec(e)[0];return Fe.includes(t)?t:Ee};async function We(s,e,t){window.Image?s=s.modify({src:e}):s=s.modify({src:Be(e)?e:ze(e,Pe().origin)});const{width:i,height:r}=await t.getImageSize(s.src);return s.modify({width:i,height:r})}class w{constructor({src:e,sizes:t,width:i,height:r,media:n="all",quality:c=70,format:h=null,preload:u=!1,modifiers:d={},provider:o=void 0,preset:l=void 0,densities:a=void 0}){m(this,"src",null);m(this,"sizes",null);m(this,"media",null);m(this,"width",null);m(this,"height",null);m(this,"format",null);m(this,"quality",null);m(this,"preload",!1);m(this,"modifiers",{});m(this,"provider");m(this,"preset");m(this,"densities");this.src=e,this.sizes=t,this.media=n,this.width=i,this.height=r,this.format=Te(e,h),this.quality=c,this.preload=u,this.modifiers=d,this.provider=o,this.preset=l,this.densities=a}get key(){return E(JSON.stringify(this.toJSON()))}get ratio(){return this.width/this.height}get className(){return`image-${E(ne(this.src))}`}get style(){return`
      @supports (aspect-ratio: 1) {
        @media ${this.media} { .${this.className} { aspect-ratio: ${this.width} / ${this.height}; } }
      }
    `}getModifiers(){return{...this.modifiers,format:this.format,quality:this.quality}}getOptions(e){return{provider:this.provider,preset:this.preset,densities:this.densities||e.densities}}getMeta(e,t){return We(new w({...this.toJSON()}),e,t)}getPreload(e,t,i){const r={rel:"preload",as:"image",imagesrcset:e,imagesizes:t,media:this.media};return i&&(r.crossorigin=i),r}modify(e){return new w({...this.toJSON(),...e})}toJSON(){return{src:this.src,sizes:this.sizes,media:this.media,width:this.width,height:this.height,format:this.format,quality:this.quality,preload:this.preload,modifiers:this.modifiers,provider:this.provider,preset:this.preset,densities:this.densities}}static create(...e){return new this(...e)}}function Te(s,e){const t=Re(s);return e!=null&&e.includes(t)?t:e||t}function ne(s){if(s.startsWith("/"))return s;const e=new URL(s);return e.pathname+e.search+e.hash}var D={};const je=["srcset","sizes","width","height","title","alt","loading","decoding","crossorigin"],qe=Object.assign({inheritAttrs:!1},{__name:"Base",props:{source:{type:[w,Object],default:null},title:{type:String,required:!0},alt:{type:String,default:null},crossorigin:{type:[Boolean,String],default(){return null},validator:ie}},emits:["load"],async setup(s,{emit:e}){let t,i;const r=ee(),n=s,c=e,h=U(),u=j().$booster,{isCritical:d}=W(),o=p(!0),l=p(null),a=p(null),v=p(null),A=p(null),M=p(null),S=x(()=>re(n.crossorigin||u.crossorigin)),F=x(()=>{var g;return[{loading:o.value}].concat((g=v.value)==null?void 0:g.className)}),f=x(()=>{var g;return r.width||((g=l.value)==null?void 0:g.width)}),_=x(()=>{var g;return r.height||((g=l.value)==null?void 0:g.height)}),N=x(()=>d.value?"eager":"lazy"),ue=x(()=>!n.source||new w(n.source).format!=="svg"?"async":"sync"),de=g=>{o.value=!1,c("load",g.target)};if(n.source){v.value=R(new w(n.source)),a.value=h.getSizes(v.value.src,{sizes:v.value.sizes,modifiers:v.value.getModifiers(),...v.value.getOptions(u)}),A.value=a.value.srcset||a.value.src,M.value=a.value.sizes;const g=p({});q(()=>g.value);try{l.value=R(([t,i]=te(()=>v.value.getMeta(a.value.src,u)),t=await t,i(),t))}catch(V){console.error(V)}g.value={style:[l.value&&me(v.value)].filter(Boolean),link:[!(!a.value||!d.value)&&D.prerender&&v.value.getPreload(a.value.srcset,a.value.sizes,S.value)].filter(Boolean),noscript:[D.prerender&&{key:"img-nojs",children:`<style>
img{content-visibility:unset!important}
</style>`}].filter(Boolean)}}else o.value=!1;return(g,V)=>($(),H("img",Ae(I(r),{srcset:A.value,sizes:M.value,width:f.value,height:_.value,class:["nuxt-booster-image",F.value],title:s.title,alt:s.alt||s.title,loading:N.value,decoding:ue.value,crossorigin:S.value,onLoad:de}),null,16,je))}}),Ue=Z(qe,[["__scopeId","data-v-d955d130"]]),ae=/(!?\(\s*min(-device)?-width)(.|\n)+\(\s*max(-device)?-width|\(\s*width\s*>(=)?(.|\n)+\(\s*width\s*<(=)?|(!?\(.*<(=)?\s*width\s*<(=)?)/i,Ve=/\(\s*min(-device)?-width|\(\s*width\s*>(=)?/i,oe=/(!?\(\s*max(-device)?-width)(.|\n)+\(\s*min(-device)?-width|\(\s*width\s*<(=)?(.|\n)+\(\s*width\s*>(=)?|(!?\(.*>(=)?\s*width\s*>(=)?)/i,Je=/\(\s*max(-device)?-width|\(\s*width\s*<(=)?/i,B=b(ae,oe,Ve),P=b(oe,ae,Je),le=/(!?\(\s*min(-device)?-height)(.|\n)+\(\s*max(-device)?-height|\(\s*height\s*>(=)?(.|\n)+\(\s*height\s*<(=)?|(!?\(.*<(=)?\s*height\s*<(=)?)/i,Qe=/\(\s*min(-device)?-height|\(\s*height\s*>(=)?/i,ce=/(!?\(\s*max(-device)?-height)(.|\n)+\(\s*min(-device)?-height|\(\s*height\s*<(=)?(.|\n)+\(\s*height\s*>(=)?|(!?\(.*>(=)?\s*height\s*>(=)?)/i,De=/\(\s*max(-device)?-height|\(\s*height\s*<(=)?/i,z=b(le,ce,Qe),k=b(ce,le,De),Y=/print/i,G=/^print$/i,y=Number.MAX_VALUE;function C(s){let e=/(-?\d*\.?\d+)(ch|em|ex|px|rem)/.exec(s);if(e===null&&(B(s)||z(s))&&(e=/(\d)/.exec(s)),e==="0")return 0;if(e===null)return y;let t=e[1];switch(e[2]){case"ch":t=parseFloat(t)*8.8984375;break;case"em":case"rem":t=parseFloat(t)*16;break;case"ex":t=parseFloat(t)*8.296875;break;case"px":t=parseFloat(t);break}return+t}function b(s,e,t){return function(i){return s.test(i)?!0:e.test(i)?!1:t.test(i)}}function K(s,e){const t=Y.test(s),i=G.test(s),r=Y.test(e),n=G.test(e);return t&&r?!i&&n?1:i&&!n?-1:s.localeCompare(e):t?1:r?-1:null}function Ye(s){const t={}.unitlessMqAlwaysFirst;function i(r,n){const c=K(r,n);if(c!==null)return c;const h=B(r)||z(r),u=P(r)||k(r),d=B(n)||z(n),o=P(n)||k(n);if(t&&(!h&&!u||!d&&!o))return!h&&!u&&!d&&!o?r.localeCompare(n):!d&&!o?1:-1;{if(h&&o)return-1;if(u&&d)return 1;const l=C(r),a=C(n);return l===y&&a===y?r.localeCompare(n):l===y?1:a===y?-1:l>a?u?-1:1:l<a?u?1:-1:r.localeCompare(n)}}return i.desktopFirst=function(r,n){const c=K(r,n);if(c!==null)return c;const h=B(r)||z(r),u=P(r)||k(r),d=B(n)||z(n),o=P(n)||k(n);if(t&&(!h&&!u||!d&&!o))return!h&&!u&&!d&&!o?r.localeCompare(n):!d&&!o?1:-1;{if(h&&o)return 1;if(u&&d)return-1;const l=C(r),a=C(n);return l===y&&a===y?r.localeCompare(n):l===y?1:a===y?-1:l>a?u?-1:1:l<a?u?1:-1:-r.localeCompare(n)}},i}const Ge=Ye();class L{constructor(e,t={}){m(this,"list",[]);m(this,"sort",!1);t=t||{},this.sort=t.sort||!1,this.list=this.list.concat(Array.from(e||this.list).map(i=>new w(i)))}get length(){return this.list.length}[Symbol.iterator](){return this.list.values()}get key(){return this.list.map(e=>e.key).join("-")}get sorted(){return this.sort?this.list.sort((e,t)=>Ge(e.media,t.media)):this.list}get style(){return this.list.map(({media:e,width:t,height:i,style:r})=>`
      @media ${e} { .${this.className}::before { padding-top: calc((1 / (${t} / ${i})) * 100%); } }
      @supports (aspect-ratio: 1) {
        @media ${e} { .${this.className} { aspect-ratio: ${t} / ${i}; } }
      }
      ${r}
    `).reverse().join(" ")}get className(){return`picture-${E(this.sorted.map(({src:e})=>ne(e)).join(","))}`}get classNames(){return{picture:this.className,image:this.list.map(e=>e.className)}}getFormats(e,t,i){return this.sorted.reduce((r,n)=>r.concat(e.map(c=>n.modify({format:c,preload:c.includes(t)&&i}))),[])}async getMeta(e,t){const i=await Promise.all(this.sorted.map(r=>{const n=e.getSizes(r.src,{sizes:r.sizes,modifiers:r.getModifiers(),...r.getOptions(t)});return r.getMeta(n.src,t)}));return new L(i)}toJSON(){return this.list}static create(...e){return new this(...e)}}var Ke={};const Xe=["srcset","sizes","media","type"],Ze={__name:"Source",props:{source:{type:w,required:!0},crossorigin:{type:[Boolean,String],default(){return null},validator:s=>["anonymous","use-credentials","",!0,!1].includes(s)}},setup(s){const e=new Map([["jpg","jpeg"]]),t=s,i=U(),r=j().$booster,n=i.getSizes(t.source.src,{sizes:t.source.sizes,modifiers:t.source.getModifiers(),...t.source.getOptions(r)}),c=p(n.srcset||n.src),h=p(`image/${e.get(t.source.format)||t.source.format}`),u=p(re(t.crossorigin||r.crossorigin)),d=new w(t.source);return q({link:[n&&d.preload&&Ke.prerender&&d.getPreload(c,n.sizes,u)].filter(Boolean)}),(o,l)=>($(),H("source",{srcset:c.value,sizes:I(n).sizes,media:s.source.media,type:h.value},null,8,Xe))}},et={__name:"Base",props:{sources:{type:[Array,L],required:!0},formats:{type:Array,default(){return null}},title:{type:String,default:null},alt:{type:String,default:null},crossorigin:{type:[Boolean,String],default(){return null},validator:ie},sortSources:{type:Boolean,default:!0}},emits:["load"],async setup(s,{emit:e}){let t,i;const r=["avif","webp","png","jpg","gif"],n=s,c=e,{isCritical:h}=W(),u=U(),d=j().$booster,o=L.create(n.sources,{sort:n.sortSources}),l=p(null),a=n.formats||d.targetFormats,v=Array.from(new Set(r.map(f=>a.find(_=>_.includes(f))))).filter(Boolean),A=r.find(f=>a.find(_=>_.includes(f))),M=p(o.getFormats(v,A,h)),S=x(()=>{var f;return((f=l.value)==null?void 0:f.classNames)||{}}),F=f=>{c("load",f)};q(()=>{if(l.value&&l.value.length){const f=l.value.classNames;return{style:[ge(l.value,f)]}}return{}});try{l.value=([t,i]=te(()=>o.getMeta(u,d)),t=await t,i(),t)}catch(f){console.error(f)}return(f,_)=>($(),H("picture",{class:J([S.value.picture,"nuxt-booster-picture"])},[($(!0),H(Me,null,Ne(M.value,N=>($(),se(I(Ze),{key:N.key,source:N,crossorigin:s.crossorigin},null,8,["source","crossorigin"]))),128)),Oe(I(Ue),{class:J(S.value.image),title:s.title,alt:s.alt,crossorigin:s.crossorigin,width:"0",height:"0",onLoad:F},null,8,["class","title","alt","crossorigin"])],2))}},X=Z(et,[["__scopeId","data-v-0370a346"]]),at=Object.assign({inheritAttrs:!1},{__name:"BoosterPicture",props:{hydrate:{type:Boolean,default:!0}},setup(s){const e=s,t=ee(),{isCritical:i}=W(),r=()=>e.hydrate?O(X,{...t,critical:i.value}):O(be,{never:!0},[O("noscript",{class:"nuxt-booster-picture-noscript"},[O(X,{...t,critical:e.hydrate})])]);return(n,c)=>($(),se(r))}});export{at as _};
