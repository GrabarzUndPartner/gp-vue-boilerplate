var G=Object.defineProperty;var J=(e,s,t)=>s in e?G(e,s,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[s]=t;var z=(e,s,t)=>J(e,typeof s!="symbol"?s+"":s,t);import{S as f,u as M,b as X,t as K,n as Z,c as ee}from"./CVx-WuE6.js";import{g as A,n as te,i as se,at as re,w as ie,au as ne,av as oe,d as ae,aw as ce,ax as le,c as N,z as ue,_ as C,v as $,f as R,N as L,o as p,e as S,m as de,a3 as H,U as he,T as me,k as fe,F as ge,ac as P,h as w}from"./BOKYFwrB.js";import{u as k}from"./PVkIm4ic.js";import{g as V}from"./DXI90VpU.js";function ye({willPerformHydration:e,hydrate:s,onCleanup:t},i=2e3){if(!e)return;if(!A())throw new Error("useHydrateWhenIdle must be called from the setup or lifecycle hook methods.");if(!("requestIdleCallback"in window)){s();return}const n=requestIdleCallback(()=>{s()},{timeout:i});t(()=>{cancelIdleCallback(n)})}function pe({willPerformHydration:e,hydrate:s,onCleanup:t},i=["focus"]){if(!e)return;const n=A();if(!n||n.isMounted)throw new Error("useHydrateOnInteraction must be called from the setup method.");const r=te(i);se(()=>{const o=re(n),a=o.length>1?o[0].parentElement||document:o[0],c={capture:!0,once:!1,passive:!0},d=l=>{l.stopPropagation();const h=l.composedPath&&l.composedPath()||l.path;if(!h){let u=l.target;for(;u;){if(o.includes(u)){s();return}if(u===a)return;u=u.parentElement}return}o.forEach(u=>{h.includes(u)&&s()})};r.forEach(l=>{a.addEventListener(l,d,c)}),t(()=>{r.forEach(l=>{a.removeEventListener(l,d,c)})})})}function we({willPerformHydration:e,hydrate:s,onCleanup:t},i){if(!e)return;if(!A())throw new Error("useHydrateWhenTriggered must be called from the setup or lifecycle hook methods.");const n=ie(ne(i)?i:()=>i,r=>{r&&s()},{immediate:!0});t(n)}const b=e=>e.length===1?e[0]:e,ve=ae({name:"LazyHydrationWrapper",inheritAttrs:!1,suspensible:!1,props:{whenIdle:{default:!1,type:[Boolean,Number]},whenVisible:{default:!1,type:[Boolean,Object]},onInteraction:{default:!1,type:[Array,Boolean,String]},whenTriggered:{default:void 0,type:[Boolean,Object]}},emits:["hydrated"],setup(e,{slots:s,emit:t}){const i=ce();if(!i.willPerformHydration)return()=>b(s.default());if(i.onHydrated(()=>t("hydrated")),e.whenIdle&&ye(i,e.whenIdle!==!0?e.whenIdle:void 0),e.whenVisible&&le(i,e.whenVisible!==!0?e.whenVisible:void 0),e.onInteraction){let n;e.onInteraction!==!0&&(n=N(()=>Array.isArray(e.onInteraction)?e.onInteraction:[e.onInteraction]).value),pe(i,n)}return e.whenTriggered!==void 0&&we(i,ue(e,"whenTriggered")),()=>b(s.default())}}),_e=oe(ve);function Q(e){return["anonymous","use-credentials"].includes(e)}var F={};const xe={inheritAttrs:!1,props:{source:{type:[f,Object],default:null},title:{type:String,required:!0},alt:{type:String,default:null},crossorigin:{type:[Boolean,String],default(){return null},validator:Q}},emits:["load"],async setup(e){const s=k(),t=$().$booster,{isCritical:i}=M(),n=N(()=>V(e.crossorigin||t.crossorigin));if(e.source){const r=new f(e.source),o=s.getSizes(r.src,{sizes:r.sizes,modifiers:r.getModifiers(),...r.getOptions(t)}),a=R(null);L(()=>a.value?{style:[a.value&&X(a,a.value.className)].filter(Boolean),link:[!(!o||!i.value)&&F.prerender&&new f(r).getPreload(o.srcset,o.sizes,n.value)].filter(Boolean),noscript:[F.prerender&&{key:"img-nojs",children:`<style>
img{content-visibility:unset!important}
</style>`}].filter(Boolean)}:{});try{a.value=await r.getMeta(o.src,t)}catch(c){console.error(c)}return{isCritical:i,config:o,meta:a,className:a.value.className,resolvedCrossorigin:n}}return{isCritical:i,resolvedCrossorigin:n}},data(){return{className:null,loading:!0,config:null,meta:null}},computed:{classNames(){return[{loading:this.loading}].concat(this.className)},srcset(){var e,s;return((e=this.config)==null?void 0:e.srcset)||((s=this.config)==null?void 0:s.src)},sizes(){var e;return(e=this.config)==null?void 0:e.sizes},width(){var e;return this.$attrs.width||((e=this.meta)==null?void 0:e.width)},height(){var e;return this.$attrs.height||((e=this.meta)==null?void 0:e.height)},loadingMode(){return this.isCritical?"eager":"lazy"},decodingMode(){return!this.source||new f(this.source).format!=="svg"?"async":"sync"}},mounted(){this.loading=!this.$el.complete,this.loading||this.onLoad({target:this.$el})},methods:{onLoad(e){this.loading=!1,this.$emit("load",e.target)}}},Se=["srcset","sizes","width","height","title","alt","loading","decoding","crossorigin"];function Ie(e,s,t,i,n,r){return p(),S("img",de(e.$attrs,{srcset:r.srcset,sizes:r.sizes,width:r.width,height:r.height,class:["nuxt-booster-image",r.classNames],title:t.title,alt:t.alt||t.title,loading:r.loadingMode,decoding:r.decodingMode,crossorigin:i.resolvedCrossorigin,onLoad:s[0]||(s[0]=(...o)=>r.onLoad&&r.onLoad(...o))}),null,16,Se)}const Be=C(xe,[["render",Ie],["__scopeId","data-v-2257c0d1"]]),U=/(!?\(\s*min(-device)?-width)(.|\n)+\(\s*max(-device)?-width|\(\s*width\s*>(=)?(.|\n)+\(\s*width\s*<(=)?|(!?\(.*<(=)?\s*width\s*<(=)?)/i,ze=/\(\s*min(-device)?-width|\(\s*width\s*>(=)?/i,q=/(!?\(\s*max(-device)?-width)(.|\n)+\(\s*min(-device)?-width|\(\s*width\s*<(=)?(.|\n)+\(\s*width\s*>(=)?|(!?\(.*>(=)?\s*width\s*>(=)?)/i,Me=/\(\s*max(-device)?-width|\(\s*width\s*<(=)?/i,g=B(U,q,ze),v=B(q,U,Me),D=/(!?\(\s*min(-device)?-height)(.|\n)+\(\s*max(-device)?-height|\(\s*height\s*>(=)?(.|\n)+\(\s*height\s*<(=)?|(!?\(.*<(=)?\s*height\s*<(=)?)/i,Ae=/\(\s*min(-device)?-height|\(\s*height\s*>(=)?/i,Y=/(!?\(\s*max(-device)?-height)(.|\n)+\(\s*min(-device)?-height|\(\s*height\s*<(=)?(.|\n)+\(\s*height\s*>(=)?|(!?\(.*>(=)?\s*height\s*>(=)?)/i,Ne=/\(\s*max(-device)?-height|\(\s*height\s*<(=)?/i,y=B(D,Y,Ae),_=B(Y,D,Ne),W=/print/i,E=/^print$/i,m=Number.MAX_VALUE;function x(e){let s=/(-?\d*\.?\d+)(ch|em|ex|px|rem)/.exec(e);if(s===null&&(g(e)||y(e))&&(s=/(\d)/.exec(e)),s==="0")return 0;if(s===null)return m;let t=s[1];switch(s[2]){case"ch":t=parseFloat(t)*8.8984375;break;case"em":case"rem":t=parseFloat(t)*16;break;case"ex":t=parseFloat(t)*8.296875;break;case"px":t=parseFloat(t);break}return+t}function B(e,s,t){return function(i){return e.test(i)?!0:s.test(i)?!1:t.test(i)}}function O(e,s){const t=W.test(e),i=E.test(e),n=W.test(s),r=E.test(s);return t&&n?!i&&r?1:i&&!r?-1:e.localeCompare(s):t?1:n?-1:null}function Ce(e){const t={}.unitlessMqAlwaysFirst;function i(n,r){const o=O(n,r);if(o!==null)return o;const a=g(n)||y(n),c=v(n)||_(n),d=g(r)||y(r),l=v(r)||_(r);if(t&&(!a&&!c||!d&&!l))return!a&&!c&&!d&&!l?n.localeCompare(r):!d&&!l?1:-1;{if(a&&l)return-1;if(c&&d)return 1;const h=x(n),u=x(r);return h===m&&u===m?n.localeCompare(r):h===m?1:u===m?-1:h>u?c?-1:1:h<u?c?1:-1:n.localeCompare(r)}}return i.desktopFirst=function(n,r){const o=O(n,r);if(o!==null)return o;const a=g(n)||y(n),c=v(n)||_(n),d=g(r)||y(r),l=v(r)||_(r);if(t&&(!a&&!c||!d&&!l))return!a&&!c&&!d&&!l?n.localeCompare(r):!d&&!l?1:-1;{if(a&&l)return 1;if(c&&d)return-1;const h=x(n),u=x(r);return h===m&&u===m?n.localeCompare(r):h===m?1:u===m?-1:h>u?c?-1:1:h<u?c?1:-1:-n.localeCompare(r)}},i}const $e=Ce();class I{constructor(s,t={}){z(this,"list",[]);z(this,"sort",!1);t=t||{},this.sort=t.sort||!1,this.list=this.list.concat(Array.from(s||this.list).map(i=>new f(i)))}get length(){return this.list.length}[Symbol.iterator](){return this.list.values()}get key(){return this.list.map(s=>s.key).join("-")}get sorted(){return this.sort?this.list.sort((s,t)=>$e(s.media,t.media)):this.list}get style(){return this.list.map(({media:s,width:t,height:i,style:n})=>`
      @media ${s} { .${this.className}::before { padding-top: calc((1 / (${t} / ${i})) * 100%); } }
      @supports (aspect-ratio: 1) {
        @media ${s} { .${this.className} { aspect-ratio: ${t} / ${i}; } }
      }
      ${n}
    `).reverse().join(" ")}get className(){return`picture-${K(this.sorted.map(({src:s})=>Z(s)).join(","))}`}get classNames(){return{picture:this.className,image:this.list.map(s=>s.className)}}getFormats(s,t,i){return this.sorted.reduce((n,r)=>n.concat(s.map(o=>r.modify({format:o,preload:o.includes(t)&&i}))),[])}async getMeta(s,t){const i=await Promise.all(this.sorted.map(n=>{const r=s.getSizes(n.src,{sizes:n.sizes,modifiers:n.getModifiers(),...n.getOptions(t)});return n.getMeta(r.src,t)}));return new I(i)}toJSON(){return this.list}static create(...s){return new this(...s)}}var Le={};const ke=new Map([["jpg","jpeg"]]),He={props:{source:{type:f,required:!0},crossorigin:{type:[Boolean,String],default(){return null},validator:e=>["anonymous","use-credentials","",!0,!1].includes(e)}},setup(e){const s=k(),t=$().$booster,i=s.getSizes(e.source.src,{sizes:e.source.sizes,modifiers:e.source.getModifiers(),...e.source.getOptions(t)}),n=N(()=>V(e.crossorigin||t.crossorigin)),r=new f(e.source);return L({link:[i&&r.preload&&Le.prerender&&r.getPreload(i.srcset,i.sizes,n)].filter(Boolean)}),{config:i,resolvedCrossorigin:n}},computed:{srcset(){return this.config.srcset||this.config.src},type(){return`image/${ke.get(this.source.format)||this.source.format}`}}},Pe=["srcset","sizes","media","type"];function be(e,s,t,i,n,r){return p(),S("source",{srcset:r.srcset,sizes:i.config.sizes,media:t.source.media,type:r.type},null,8,Pe)}const Fe=C(He,[["render",be]]),T=["avif","webp","png","jpg","gif"],We={components:{PictureSource:Fe,BaseImage:Be},props:{sources:{type:[Array,I],required:!0},formats:{type:Array,default(){return null}},title:{type:String,default:null},alt:{type:String,default:null},crossorigin:{type:[Boolean,String],default(){return null},validator:Q},sortSources:{type:Boolean,default:!0}},emits:["load"],async setup(e){const{isCritical:s}=M(),t=k(),i=$().$booster,n=I.create(e.sources,{sort:e.sortSources}),r=R(null);L(()=>{if(r.value&&r.value.length){const o=r.value.classNames;return{style:[ee(r.value,o)]}}return{}});try{r.value=await n.getMeta(t,i)}catch(o){console.error(o)}return{isCritical:s,resolvedFormats:e.formats||i.targetFormats,sourceList:n,metaSources:r,classNames:r.value.classNames}},computed:{formatSources(){const e=Array.from(new Set(T.map(t=>this.resolvedFormats.find(i=>i.includes(t))))).filter(Boolean),s=T.find(t=>this.resolvedFormats.find(i=>i.includes(t)));return this.sourceList.getFormats(e,s,this.isCritical)}},methods:{onLoad(e){this.$emit("load",e)}}};function Ee(e,s,t,i,n,r){const o=H("picture-source"),a=H("base-image");return p(),S("picture",{class:P([i.classNames.picture,"nuxt-booster-picture"])},[(p(!0),S(he,null,me(r.formatSources,c=>(p(),fe(o,{key:c.key,source:c,crossorigin:t.crossorigin},null,8,["source","crossorigin"]))),128)),ge(a,{class:P(i.classNames.image),title:t.title,alt:t.alt,crossorigin:t.crossorigin,width:"0",height:"0",onLoad:r.onLoad},null,8,["class","title","alt","crossorigin","onLoad"])],2)}const j=C(We,[["render",Ee],["__scopeId","data-v-f1e45e8c"]]),Qe={inheritAttrs:!1,props:{hydrate:{type:Boolean,default:!0}},setup(){const{isCritical:e}=M();return{isCritical:e}},render(){return this.hydrate?w(j,{...this.$attrs,critical:this.isCritical}):w(_e,{never:!0},[w("noscript",{class:"nuxt-booster-picture-noscript"},[w(j,{...this.$attrs,critical:this.hydrate})])])}};export{Qe as _};
