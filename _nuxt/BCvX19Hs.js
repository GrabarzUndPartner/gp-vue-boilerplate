import{a3 as $,ae as O,a5 as w,ag as E,ah as j,ai as H,aj as S,v as R,a as A}from"./Ud5EjKRc.js";async function D(t,e){return await U(e).catch(i=>(console.error("Failed to get image meta for "+e,i+""),{width:0,height:0,ratio:0}))}async function U(t){if(typeof Image>"u")throw new TypeError("Image not supported");return new Promise((e,r)=>{const i=new Image;i.onload=()=>{const s={width:i.width,height:i.height,ratio:i.width/i.height};e(s)},i.onerror=s=>r(s),i.src=t})}function W(t){return e=>e?t[e]||e:t.missingValue}function L({formatter:t,keyMap:e,joinWith:r="/",valueMap:i}={}){t||(t=(o,n)=>`${o}=${n}`),e&&typeof e!="function"&&(e=W(e));const s=i||{};return Object.keys(s).forEach(o=>{typeof s[o]!="function"&&(s[o]=W(s[o]))}),(o={})=>Object.entries(o).filter(([c,a])=>typeof a<"u").map(([c,a])=>{const d=s[c];return typeof d=="function"&&(a=d(o[c])),c=typeof e=="function"?e(c):c,t(c,a)}).join(r)}function p(t=""){if(typeof t=="number")return t;if(typeof t=="string"&&t.replace("px","").match(/^\d+$/g))return Number.parseInt(t,10)}function F(t=""){if(t===void 0||!t.length)return[];const e=new Set;for(const r of t.split(" ")){const i=Number.parseInt(r.replace("x",""));i&&e.add(i)}return Array.from(e)}function T(t){if(t.length===0)throw new Error("`densities` must not be empty, configure to `1` to render regular size only (DPR 1.0)")}function q(t){const e={};if(typeof t=="string")for(const r of t.split(/[\s,]+/).filter(i=>i)){const i=r.split(":");i.length!==2?e["1px"]=i[0].trim():e[i[0].trim()]=i[1].trim()}else Object.assign(e,t);return e}function G(t){const e={options:t},r=(s,o={})=>z(e,s,o),i=(s,o={},n={})=>r(s,{...n,modifiers:j(o,n.modifiers||{})}).url;for(const s in t.presets)i[s]=(o,n,c)=>i(o,n,{...t.presets[s],...c});return i.options=t,i.getImage=r,i.getMeta=(s,o)=>J(e,s,o),i.getSizes=(s,o)=>V(e,s,o),e.$img=i,i}async function J(t,e,r){const i=z(t,e,{...r});return typeof i.getMeta=="function"?await i.getMeta():await D(t,i.url)}function z(t,e,r){var d,u;if(e&&typeof e!="string")throw new TypeError(`input must be a string (received ${typeof e}: ${JSON.stringify(e)})`);if(!e||e.startsWith("data:"))return{url:e};const{provider:i,defaults:s}=k(t,r.provider||t.options.provider),o=C(t,r.preset);if(e=$(e)?e:O(e),!i.supportsAlias)for(const m in t.options.alias)e.startsWith(m)&&(e=w(t.options.alias[m],e.substr(m.length)));if(i.validateDomains&&$(e)){const m=E(e).host;if(!t.options.domains.find(l=>l===m))return{url:e}}const n=j(r,o,s);n.modifiers={...n.modifiers};const c=n.modifiers.format;(d=n.modifiers)!=null&&d.width&&(n.modifiers.width=p(n.modifiers.width)),(u=n.modifiers)!=null&&u.height&&(n.modifiers.height=p(n.modifiers.height));const a=i.getImage(e,n,t);return a.format=a.format||c||"",a}function k(t,e){const r=t.options.providers[e];if(!r)throw new Error("Unknown provider: "+e);return r}function C(t,e){if(!e)return{};if(!t.options.presets[e])throw new Error("Unknown preset: "+e);return t.options.presets[e]}function V(t,e,r){var x,y,v,_,b;const i=p((x=r.modifiers)==null?void 0:x.width),s=p((y=r.modifiers)==null?void 0:y.height),o=q(r.sizes),n=(v=r.densities)!=null&&v.trim()?F(r.densities.trim()):t.options.densities;T(n);const c=i&&s?s/i:0,a=[],d=[];if(Object.keys(o).length>=1){for(const f in o){const h=I(f,String(o[f]),s,c,t);if(h!==void 0){a.push({size:h.size,screenMaxWidth:h.screenMaxWidth,media:`(max-width: ${h.screenMaxWidth}px)`});for(const g of n)d.push({width:h._cWidth*g,src:M(t,e,r,h,g)})}}Z(a)}else for(const f of n){const h=Object.keys(o)[0];let g=I(h,String(o[h]),s,c,t);g===void 0&&(g={size:"",screenMaxWidth:0,_cWidth:(_=r.modifiers)==null?void 0:_.width,_cHeight:(b=r.modifiers)==null?void 0:b.height}),d.push({width:f,src:M(t,e,r,g,f)})}B(d);const u=d[d.length-1],m=a.length?a.map(f=>`${f.media?f.media+" ":""}${f.size}`).join(", "):void 0,l=m?"w":"x",N=d.map(f=>`${f.src} ${f.width}${l}`).join(", ");return{sizes:m,srcset:N,src:u==null?void 0:u.src}}function I(t,e,r,i,s){const o=s.options.screens&&s.options.screens[t]||Number.parseInt(t),n=e.endsWith("vw");if(!n&&/^\d+$/.test(e)&&(e=e+"px"),!n&&!e.endsWith("px"))return;let c=Number.parseInt(e);if(!o||!c)return;n&&(c=Math.round(c/100*o));const a=i?Math.round(c*i):r;return{size:e,screenMaxWidth:o,_cWidth:c,_cHeight:a}}function M(t,e,r,i,s){return t.$img(e,{...r.modifiers,width:i._cWidth?i._cWidth*s:void 0,height:i._cHeight?i._cHeight*s:void 0},r)}function Z(t){var r;t.sort((i,s)=>i.screenMaxWidth-s.screenMaxWidth);let e=null;for(let i=t.length-1;i>=0;i--){const s=t[i];s.media===e&&t.splice(i,1),e=s.media}for(let i=0;i<t.length;i++)t[i].media=((r=t[i+1])==null?void 0:r.media)||""}function B(t){t.sort((r,i)=>r.width-i.width);let e=null;for(let r=t.length-1;r>=0;r--){const i=t[r];i.width===e&&t.splice(r,1),e=i.width}}const Q=L({keyMap:{format:"f",fit:"fit",width:"w",height:"h",resize:"s",quality:"q",background:"b"},joinWith:"&",formatter:(t,e)=>S(t)+"_"+S(e)}),X=(t,{modifiers:e={},baseURL:r}={},i)=>{e.width&&e.height&&(e.resize=`${e.width}x${e.height}`,delete e.width,delete e.height);const s=Q(e)||"_";return r||(r=w(i.options.nuxt.baseURL,"/_ipx")),{url:w(r,s,H(t))}},Y=!0,K=!0,ee=Object.freeze(Object.defineProperty({__proto__:null,getImage:X,supportsAlias:K,validateDomains:Y},Symbol.toStringTag,{value:"Module"})),P={screens:{xs:576,sm:768,md:996,lg:1200,xl:1367,xxl:1600,"2xl":1536,default:320,xxs:480,"4k":1921},presets:{},provider:"ipxStatic",domains:["picsum.photos","img.youtube.com","i.vimeocdn.com","i.pickadummy.com"],alias:{"/picsum":"https://picsum.photos","/youtube":"https://img.youtube.com","/vimeo":"https://i.vimeocdn.com","/pickadummy":"https://i.pickadummy.com"},densities:[1,2],format:["webp"]};P.providers={ipxStatic:{provider:ee,defaults:{}}};const ie=()=>{const t=A(),e=R();return e.$img||e._img||(e._img=G({...P,nuxt:{baseURL:t.app.baseURL}}))};export{p,ie as u};
