var ce=Object.defineProperty;var ue=(s,e,t)=>e in s?ce(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t;var f=(s,e,t)=>ue(s,typeof e!="symbol"?e+"":e,t);import{d as de,a3 as he,ag as me,ah as ge,_ as K,ad as fe,v as W,f as p,c as _,au as J,N as T,Q as X,o as z,e as k,m as pe,n as L,S as ve,R as ye,F as we,ab as b,k as _e,h as F}from"./BFbNfJ5c.js";import{t as H,u as q,b as $e,c as Se}from"./C3fWryvC.js";import{g as Z}from"./DP45TdIg.js";import{u as U}from"./DYNMxd_h.js";function xe(s){return new URL(window.location.href)}const Be=de({name:"HydrationWrapper",setup(s,{slots:e}){return()=>ze(e.default())}}),ze=s=>s.length===1?s[0]:s,Me=["avif","webp","png","jpg","gif"],Ae="jpg",Ne=s=>{const{pathname:e}=ge(s),t=/[.]/.exec(e)&&/[^.]+$/.exec(e)[0];return Me.includes(t)?t:Ae};async function Fe(s,e,t){window.Image?s=s.modify({src:e}):s=s.modify({src:he(e)?e:me(e,xe().origin)});const{width:n,height:i}=await t.getImageSize(s.src);return s.modify({width:n,height:i})}class w{constructor({src:e,sizes:t,width:n,height:i,media:r="all",quality:h=70,format:g=null,preload:l=!1,modifiers:c={},provider:u=void 0,preset:o=void 0,densities:a=void 0}){f(this,"src",null);f(this,"sizes",null);f(this,"media",null);f(this,"width",null);f(this,"height",null);f(this,"format",null);f(this,"quality",null);f(this,"preload",!1);f(this,"modifiers",{});f(this,"provider");f(this,"preset");f(this,"densities");this.src=e,this.sizes=t,this.media=r,this.width=n,this.height=i,this.format=Oe(e,g),this.quality=h,this.preload=l,this.modifiers=c,this.provider=u,this.preset=o,this.densities=a}get key(){return H(JSON.stringify(this.toJSON()))}get ratio(){return this.width/this.height}get className(){return`image-${H(ee(this.src))}`}get style(){return`
      @supports (aspect-ratio: 1) {
        @media ${this.media} { .${this.className} { aspect-ratio: ${this.width} / ${this.height}; } }
      }
    `}getModifiers(){return{...this.modifiers,format:this.format,quality:this.quality}}getOptions(e){return{provider:this.provider,preset:this.preset,densities:this.densities||e.densities}}getMeta(e,t){return Fe(new w({...this.toJSON()}),e,t)}getPreload(e,t,n){const i={rel:"preload",as:"image",imagesrcset:e,imagesizes:t,media:this.media};return n&&(i.crossorigin=n),i}modify(e){return new w({...this.toJSON(),...e})}toJSON(){return{src:this.src,sizes:this.sizes,media:this.media,width:this.width,height:this.height,format:this.format,quality:this.quality,preload:this.preload,modifiers:this.modifiers,provider:this.provider,preset:this.preset,densities:this.densities}}static create(...e){return new this(...e)}}function Oe(s,e){const t=Ne(s);return e!=null&&e.includes(t)?t:e||t}function ee(s){if(s.startsWith("/"))return s;const e=new URL(s);return e.pathname+e.search+e.hash}function te(s){return["anonymous","use-credentials"].includes(s)}const Pe={source:{type:[w,Object],default:null},title:{type:String,required:!0},alt:{type:String,default:null},crossorigin:{type:[Boolean,String],default(){return null},validator:te}};var Q={};const Ce=["srcset","sizes","width","height","title","alt","loading","decoding","crossorigin"],ke=Object.assign({inheritAttrs:!1},{__name:"Base",props:Pe,emits:["load"],async setup(s,{emit:e}){let t,n;const i=fe(),r=s,h=e,g=U(),l=W().$booster,{isCritical:c}=q(),u=p(!0),o=p(null),a=p(null),v=p(null),M=p(null),A=p(null),S=_(()=>Z(r.crossorigin||l.crossorigin)),j=_(()=>{var m;return[{loading:u.value}].concat((m=v.value)==null?void 0:m.className)}),d=_(()=>{var m;return i.width||((m=o.value)==null?void 0:m.width)}),$=_(()=>{var m;return i.height||((m=o.value)==null?void 0:m.height)}),N=_(()=>c.value?"eager":"lazy"),ae=_(()=>!r.source||new w(r.source).format!=="svg"?"async":"sync"),le=m=>{u.value=!1,h("load",m.target)};if(r.source){v.value=J(new w(r.source)),a.value=g.getSizes(v.value.src,{sizes:v.value.sizes,modifiers:v.value.getModifiers(),...v.value.getOptions(l)}),M.value=a.value.srcset||a.value.src,A.value=a.value.sizes;const m=p({});T(()=>m.value);try{o.value=J(([t,n]=X(()=>v.value.getMeta(a.value.src,l)),t=await t,n(),t))}catch(E){console.error(E)}m.value={style:[o.value&&$e(v.value)].filter(Boolean),link:[!(!a.value||!c.value)&&Q.prerender&&v.value.getPreload(a.value.srcset,a.value.sizes,S.value)].filter(Boolean),noscript:[Q.prerender&&{key:"img-nojs",children:`<style>
img{content-visibility:unset!important}
</style>`}].filter(Boolean)}}else u.value=!1;return(m,E)=>(z(),k("img",pe(L(i),{srcset:M.value,sizes:A.value,width:d.value,height:$.value,class:["nuxt-booster-image",j.value],title:m.title,alt:m.alt||m.title,loading:N.value,decoding:ae.value,crossorigin:S.value,onLoad:le}),null,16,Ce))}}),Le=K(ke,[["__scopeId","data-v-e7ed0ca7"]]),se=/(!?\(\s*min(-device)?-width)(.|\n)+\(\s*max(-device)?-width|\(\s*width\s*>(=)?(.|\n)+\(\s*width\s*<(=)?|(!?\(.*<(=)?\s*width\s*<(=)?)/i,Re=/\(\s*min(-device)?-width|\(\s*width\s*>(=)?/i,ie=/(!?\(\s*max(-device)?-width)(.|\n)+\(\s*min(-device)?-width|\(\s*width\s*<(=)?(.|\n)+\(\s*width\s*>(=)?|(!?\(.*>(=)?\s*width\s*>(=)?)/i,Ie=/\(\s*max(-device)?-width|\(\s*width\s*<(=)?/i,x=R(se,ie,Re),O=R(ie,se,Ie),re=/(!?\(\s*min(-device)?-height)(.|\n)+\(\s*max(-device)?-height|\(\s*height\s*>(=)?(.|\n)+\(\s*height\s*<(=)?|(!?\(.*<(=)?\s*height\s*<(=)?)/i,je=/\(\s*min(-device)?-height|\(\s*height\s*>(=)?/i,ne=/(!?\(\s*max(-device)?-height)(.|\n)+\(\s*min(-device)?-height|\(\s*height\s*<(=)?(.|\n)+\(\s*height\s*>(=)?|(!?\(.*>(=)?\s*height\s*>(=)?)/i,He=/\(\s*max(-device)?-height|\(\s*height\s*<(=)?/i,B=R(re,ne,je),P=R(ne,re,He),D=/print/i,V=/^print$/i,y=Number.MAX_VALUE;function C(s){let e=/(-?\d*\.?\d+)(ch|em|ex|px|rem)/.exec(s);if(e===null&&(x(s)||B(s))&&(e=/(\d)/.exec(s)),e==="0")return 0;if(e===null)return y;let t=e[1];switch(e[2]){case"ch":t=parseFloat(t)*8.8984375;break;case"em":case"rem":t=parseFloat(t)*16;break;case"ex":t=parseFloat(t)*8.296875;break;case"px":t=parseFloat(t);break}return+t}function R(s,e,t){return function(n){return s.test(n)?!0:e.test(n)?!1:t.test(n)}}function Y(s,e){const t=D.test(s),n=V.test(s),i=D.test(e),r=V.test(e);return t&&i?!n&&r?1:n&&!r?-1:s.localeCompare(e):t?1:i?-1:null}function We(s){const t={}.unitlessMqAlwaysFirst;function n(i,r){const h=Y(i,r);if(h!==null)return h;const g=x(i)||B(i),l=O(i)||P(i),c=x(r)||B(r),u=O(r)||P(r);if(t&&(!g&&!l||!c&&!u))return!g&&!l&&!c&&!u?i.localeCompare(r):!c&&!u?1:-1;{if(g&&u)return-1;if(l&&c)return 1;const o=C(i),a=C(r);return o===y&&a===y?i.localeCompare(r):o===y?1:a===y?-1:o>a?l?-1:1:o<a?l?1:-1:i.localeCompare(r)}}return n.desktopFirst=function(i,r){const h=Y(i,r);if(h!==null)return h;const g=x(i)||B(i),l=O(i)||P(i),c=x(r)||B(r),u=O(r)||P(r);if(t&&(!g&&!l||!c&&!u))return!g&&!l&&!c&&!u?i.localeCompare(r):!c&&!u?1:-1;{if(g&&u)return 1;if(l&&c)return-1;const o=C(i),a=C(r);return o===y&&a===y?i.localeCompare(r):o===y?1:a===y?-1:o>a?l?-1:1:o<a?l?1:-1:-i.localeCompare(r)}},n}const Te=We();class I{constructor(e,t={}){f(this,"list",[]);f(this,"sort",!1);t=t||{},this.sort=t.sort||!1,this.list=this.list.concat(Array.from(e||this.list).map(n=>new w(n)))}get length(){return this.list.length}[Symbol.iterator](){return this.list.values()}get key(){return this.list.map(e=>e.key).join("-")}get sorted(){return this.sort?this.list.sort((e,t)=>Te(e.media,t.media)):this.list}get style(){return this.list.map(({media:e,width:t,height:n,style:i})=>`
      @media ${e} { .${this.className}::before { padding-top: calc((1 / (${t} / ${n})) * 100%); } }
      @supports (aspect-ratio: 1) {
        @media ${e} { .${this.className} { aspect-ratio: ${t} / ${n}; } }
      }
      ${i}
    `).reverse().join(" ")}get className(){return`picture-${H(this.sorted.map(({src:e})=>ee(e)).join(","))}`}get classNames(){return{picture:this.className,image:this.list.map(e=>e.className)}}getFormats(e,t,n){return this.sorted.reduce((i,r)=>i.concat(e.map(h=>r.modify({format:h,preload:h.includes(t)&&n}))),[])}async getMeta(e,t){const n=await Promise.all(this.sorted.map(i=>{const r=e.getSizes(i.src,{sizes:i.sizes,modifiers:i.getModifiers(),...i.getOptions(t)});return i.getMeta(r.src,t)}));return new I(n)}toJSON(){return this.list}static create(...e){return new this(...e)}}var qe={};const Ue=["srcset","sizes","media","type"],Ee={__name:"Source",props:{source:{type:w,required:!0},crossorigin:{type:[Boolean,String],default(){return null},validator:s=>["anonymous","use-credentials","",!0,!1].includes(s)}},setup(s){const e=new Map([["jpg","jpeg"]]),t=s,n=U(),i=W().$booster,r=n.getSizes(t.source.src,{sizes:t.source.sizes,modifiers:t.source.getModifiers(),...t.source.getOptions(i)}),h=p(r.srcset||r.src),g=p(`image/${e.get(t.source.format)||t.source.format}`),l=p(Z(t.crossorigin||i.crossorigin)),c=new w(t.source);return T({link:[r&&c.preload&&qe.prerender&&c.getPreload(h,r.sizes,l)].filter(Boolean)}),(u,o)=>(z(),k("source",{srcset:h.value,sizes:L(r).sizes,media:s.source.media,type:g.value},null,8,Ue))}},oe={sources:{type:[Array,I],required:!0},formats:{type:Array,default(){return null}},title:{type:String,default:null},alt:{type:String,default:null},crossorigin:{type:[Boolean,String],default(){return null},validator:te},sortSources:{type:Boolean,default:!0}},Je={__name:"Base",props:oe,emits:["load"],async setup(s,{emit:e}){let t,n;const i=["avif","webp","png","jpg","gif"],r=s,h=e,{isCritical:g}=q(),l=U(),c=W().$booster,u=I.create(r.sources,{sort:r.sortSources}),o=p(null),a=r.formats||c.targetFormats,v=Array.from(new Set(i.map(d=>a.find($=>$.includes(d))))).filter(Boolean),M=i.find(d=>a.find($=>$.includes(d))),A=p(u.getFormats(v,M,g)),S=_(()=>{var d;return((d=o.value)==null?void 0:d.classNames)||{}}),j=d=>{h("load",d)};T(()=>{if(o.value&&o.value.length){const d=o.value.classNames;return{style:[Se(o.value,d)]}}return{}});try{o.value=([t,n]=X(()=>u.getMeta(l,c)),t=await t,n(),t)}catch(d){console.error(d)}return(d,$)=>(z(),k("picture",{class:b([S.value.picture,"nuxt-booster-picture"])},[(z(!0),k(ve,null,ye(A.value,N=>(z(),_e(L(Ee),{key:N.key,source:N,crossorigin:d.crossorigin},null,8,["source","crossorigin"]))),128)),we(L(Le),{class:b(S.value.image),title:d.title,alt:d.alt,crossorigin:d.crossorigin,width:"0",height:"0",onLoad:j},null,8,["class","title","alt","crossorigin"])],2))}},G=K(Je,[["__scopeId","data-v-afeddf24"]]),Ge={props:{hydrate:{type:Boolean,default:!0},...oe},setup(){const{isCritical:s}=q();return{isCritical:s}},render(){return this.hydrate?F(G,{...this.$attrs,...this.$props,hydrate:void 0,critical:this.isCritical}):F(Be,{},[F("noscript",{class:"nuxt-booster-picture-noscript"},[F(G,{...this.$attrs,...this.$props,hydrate:void 0,critical:this.hydrate})])])}};export{Ge as _};
