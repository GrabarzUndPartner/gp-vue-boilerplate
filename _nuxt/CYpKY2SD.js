var G=Object.defineProperty;var J=(e,s,t)=>s in e?G(e,s,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[s]=t;var z=(e,s,t)=>J(e,typeof s!="symbol"?s+"":s,t);import{S as f,u as A,b as K,t as X,n as Z,c as ee}from"./CoZFezmE.js";import{l as R,w as te,at as se,au as re,d as ie,av as ne,aw as oe,c as M,f as ae,_ as N,b as C,r as V,K as $,n as p,p as S,F as ce,a0 as H,Q as le,P as ue,y as de,A as he,a7 as L,h as w}from"./BYbGsSfc.js";import{u as me}from"./C0OUxaNp.js";import{u as k}from"./BQJZLSUt.js";import{g as E}from"./BGU4xVSY.js";function fe({willPerformHydration:e,hydrate:s,onCleanup:t},i=2e3){if(!e)return;if(!R())throw new Error("useHydrateWhenIdle must be called from the setup or lifecycle hook methods.");if(!("requestIdleCallback"in window)){s();return}const n=requestIdleCallback(()=>{s()},{timeout:i});t(()=>{cancelIdleCallback(n)})}function ge({willPerformHydration:e,hydrate:s,onCleanup:t},i){if(!e)return;if(!R())throw new Error("useHydrateWhenTriggered must be called from the setup or lifecycle hook methods.");const n=te(se(i)?i:()=>i,r=>{r&&s()},{immediate:!0});t(n)}const P=e=>e.length===1?e[0]:e,ye=ie({name:"LazyHydrationWrapper",inheritAttrs:!1,suspensible:!1,props:{whenIdle:{default:!1,type:[Boolean,Number]},whenVisible:{default:!1,type:[Boolean,Object]},onInteraction:{default:!1,type:[Array,Boolean,String]},whenTriggered:{default:void 0,type:[Boolean,Object]}},emits:["hydrated"],setup(e,{slots:s,emit:t}){const i=ne();if(!i.willPerformHydration)return()=>P(s.default());if(i.onHydrated(()=>t("hydrated")),e.whenIdle&&fe(i,e.whenIdle!==!0?e.whenIdle:void 0),e.whenVisible&&oe(i,e.whenVisible!==!0?e.whenVisible:void 0),e.onInteraction){let n;e.onInteraction!==!0&&(n=M(()=>Array.isArray(e.onInteraction)?e.onInteraction:[e.onInteraction]).value),me(i,n)}return e.whenTriggered!==void 0&&ge(i,ae(e,"whenTriggered")),()=>P(s.default())}}),pe=re(ye);function Q(e){return["anonymous","use-credentials"].includes(e)}var b={};const we={inheritAttrs:!1,props:{source:{type:[f,Object],default:null},title:{type:String,required:!0},alt:{type:String,default:null},crossorigin:{type:[Boolean,String],default(){return null},validator:Q}},emits:["load"],async setup(e){const s=k(),t=C().$booster,{isCritical:i}=A(),n=M(()=>E(e.crossorigin||t.crossorigin));if(e.source){const r=new f(e.source),o=s.getSizes(r.src,{sizes:r.sizes,modifiers:r.getModifiers(),...r.getOptions(t)}),a=V(null);$(()=>a.value?{style:[a.value&&K(a,a.value.className)].filter(Boolean),link:[!(!o||!i.value)&&b.prerender&&new f(r).getPreload(o.srcset,o.sizes,n.value)].filter(Boolean),noscript:[b.prerender&&{key:"img-nojs",children:`<style>
img{content-visibility:unset!important}
</style>`}].filter(Boolean)}:{});try{a.value=await r.getMeta(o.src,t)}catch(c){console.error(c)}return{isCritical:i,config:o,meta:a,className:a.value.className,resolvedCrossorigin:n}}return{isCritical:i,resolvedCrossorigin:n}},data(){return{className:null,loading:!0,config:null,meta:null}},computed:{classNames(){return[{loading:this.loading}].concat(this.className)},srcset(){var e,s;return((e=this.config)==null?void 0:e.srcset)||((s=this.config)==null?void 0:s.src)},sizes(){var e;return(e=this.config)==null?void 0:e.sizes},width(){var e;return this.$attrs.width||((e=this.meta)==null?void 0:e.width)},height(){var e;return this.$attrs.height||((e=this.meta)==null?void 0:e.height)},loadingMode(){return this.isCritical?"eager":"lazy"},decodingMode(){return!this.source||new f(this.source).format!=="svg"?"async":"sync"}},mounted(){this.loading=!this.$el.complete,this.loading||this.onLoad({target:this.$el})},methods:{onLoad(e){this.loading=!1,this.$emit("load",e.target)}}},ve=["srcset","sizes","width","height","title","alt","loading","decoding","crossorigin"];function _e(e,s,t,i,n,r){return p(),S("img",ce(e.$attrs,{srcset:r.srcset,sizes:r.sizes,width:r.width,height:r.height,class:["nuxt-booster-image",r.classNames],title:t.title,alt:t.alt||t.title,loading:r.loadingMode,decoding:r.decodingMode,crossorigin:i.resolvedCrossorigin,onLoad:s[0]||(s[0]=(...o)=>r.onLoad&&r.onLoad(...o))}),null,16,ve)}const xe=N(we,[["render",_e],["__scopeId","data-v-2257c0d1"]]),q=/(!?\(\s*min(-device)?-width)(.|\n)+\(\s*max(-device)?-width|\(\s*width\s*>(=)?(.|\n)+\(\s*width\s*<(=)?|(!?\(.*<(=)?\s*width\s*<(=)?)/i,Se=/\(\s*min(-device)?-width|\(\s*width\s*>(=)?/i,D=/(!?\(\s*max(-device)?-width)(.|\n)+\(\s*min(-device)?-width|\(\s*width\s*<(=)?(.|\n)+\(\s*width\s*>(=)?|(!?\(.*>(=)?\s*width\s*>(=)?)/i,Be=/\(\s*max(-device)?-width|\(\s*width\s*<(=)?/i,g=I(q,D,Se),v=I(D,q,Be),U=/(!?\(\s*min(-device)?-height)(.|\n)+\(\s*max(-device)?-height|\(\s*height\s*>(=)?(.|\n)+\(\s*height\s*<(=)?|(!?\(.*<(=)?\s*height\s*<(=)?)/i,Ie=/\(\s*min(-device)?-height|\(\s*height\s*>(=)?/i,Y=/(!?\(\s*max(-device)?-height)(.|\n)+\(\s*min(-device)?-height|\(\s*height\s*<(=)?(.|\n)+\(\s*height\s*>(=)?|(!?\(.*>(=)?\s*height\s*>(=)?)/i,ze=/\(\s*max(-device)?-height|\(\s*height\s*<(=)?/i,y=I(U,Y,Ie),_=I(Y,U,ze),F=/print/i,W=/^print$/i,m=Number.MAX_VALUE;function x(e){let s=/(-?\d*\.?\d+)(ch|em|ex|px|rem)/.exec(e);if(s===null&&(g(e)||y(e))&&(s=/(\d)/.exec(e)),s==="0")return 0;if(s===null)return m;let t=s[1];switch(s[2]){case"ch":t=parseFloat(t)*8.8984375;break;case"em":case"rem":t=parseFloat(t)*16;break;case"ex":t=parseFloat(t)*8.296875;break;case"px":t=parseFloat(t);break}return+t}function I(e,s,t){return function(i){return e.test(i)?!0:s.test(i)?!1:t.test(i)}}function O(e,s){const t=F.test(e),i=W.test(e),n=F.test(s),r=W.test(s);return t&&n?!i&&r?1:i&&!r?-1:e.localeCompare(s):t?1:n?-1:null}function Ae(e){const t={}.unitlessMqAlwaysFirst;function i(n,r){const o=O(n,r);if(o!==null)return o;const a=g(n)||y(n),c=v(n)||_(n),l=g(r)||y(r),u=v(r)||_(r);if(t&&(!a&&!c||!l&&!u))return!a&&!c&&!l&&!u?n.localeCompare(r):!l&&!u?1:-1;{if(a&&u)return-1;if(c&&l)return 1;const d=x(n),h=x(r);return d===m&&h===m?n.localeCompare(r):d===m?1:h===m?-1:d>h?c?-1:1:d<h?c?1:-1:n.localeCompare(r)}}return i.desktopFirst=function(n,r){const o=O(n,r);if(o!==null)return o;const a=g(n)||y(n),c=v(n)||_(n),l=g(r)||y(r),u=v(r)||_(r);if(t&&(!a&&!c||!l&&!u))return!a&&!c&&!l&&!u?n.localeCompare(r):!l&&!u?1:-1;{if(a&&u)return 1;if(c&&l)return-1;const d=x(n),h=x(r);return d===m&&h===m?n.localeCompare(r):d===m?1:h===m?-1:d>h?c?-1:1:d<h?c?1:-1:-n.localeCompare(r)}},i}const Me=Ae();class B{constructor(s,t={}){z(this,"list",[]);z(this,"sort",!1);t=t||{},this.sort=t.sort||!1,this.list=this.list.concat(Array.from(s||this.list).map(i=>new f(i)))}get length(){return this.list.length}[Symbol.iterator](){return this.list.values()}get key(){return this.list.map(s=>s.key).join("-")}get sorted(){return this.sort?this.list.sort((s,t)=>Me(s.media,t.media)):this.list}get style(){return this.list.map(({media:s,width:t,height:i,style:n})=>`
      @media ${s} { .${this.className}::before { padding-top: calc((1 / (${t} / ${i})) * 100%); } }
      @supports (aspect-ratio: 1) {
        @media ${s} { .${this.className} { aspect-ratio: ${t} / ${i}; } }
      }
      ${n}
    `).reverse().join(" ")}get className(){return`picture-${X(this.sorted.map(({src:s})=>Z(s)).join(","))}`}get classNames(){return{picture:this.className,image:this.list.map(s=>s.className)}}getFormats(s,t,i){return this.sorted.reduce((n,r)=>n.concat(s.map(o=>r.modify({format:o,preload:o.includes(t)&&i}))),[])}async getMeta(s,t){const i=await Promise.all(this.sorted.map(n=>{const r=s.getSizes(n.src,{sizes:n.sizes,modifiers:n.getModifiers(),...n.getOptions(t)});return n.getMeta(r.src,t)}));return new B(i)}toJSON(){return this.list}static create(...s){return new this(...s)}}var Ne={};const Ce=new Map([["jpg","jpeg"]]),$e={props:{source:{type:f,required:!0},crossorigin:{type:[Boolean,String],default(){return null},validator:e=>["anonymous","use-credentials","",!0,!1].includes(e)}},setup(e){const s=k(),t=C().$booster,i=s.getSizes(e.source.src,{sizes:e.source.sizes,modifiers:e.source.getModifiers(),...e.source.getOptions(t)}),n=M(()=>E(e.crossorigin||t.crossorigin)),r=new f(e.source);return $({link:[i&&r.preload&&Ne.prerender&&r.getPreload(i.srcset,i.sizes,n)].filter(Boolean)}),{config:i,resolvedCrossorigin:n}},computed:{srcset(){return this.config.srcset||this.config.src},type(){return`image/${Ce.get(this.source.format)||this.source.format}`}}},ke=["srcset","sizes","media","type"];function He(e,s,t,i,n,r){return p(),S("source",{srcset:r.srcset,sizes:i.config.sizes,media:t.source.media,type:r.type},null,8,ke)}const Le=N($e,[["render",He]]),T=["avif","webp","png","jpg","gif"],Pe={components:{PictureSource:Le,BaseImage:xe},props:{sources:{type:[Array,B],required:!0},formats:{type:Array,default(){return null}},title:{type:String,default:null},alt:{type:String,default:null},crossorigin:{type:[Boolean,String],default(){return null},validator:Q},sortSources:{type:Boolean,default:!0}},emits:["load"],async setup(e){const{isCritical:s}=A(),t=k(),i=C().$booster,n=B.create(e.sources,{sort:e.sortSources}),r=V(null);$(()=>{if(r.value&&r.value.length){const o=r.value.classNames;return{style:[ee(r.value,o)]}}return{}});try{r.value=await n.getMeta(t,i)}catch(o){console.error(o)}return{isCritical:s,resolvedFormats:e.formats||i.targetFormats,sourceList:n,metaSources:r,classNames:r.value.classNames}},computed:{formatSources(){const e=Array.from(new Set(T.map(t=>this.resolvedFormats.find(i=>i.includes(t))))).filter(Boolean),s=T.find(t=>this.resolvedFormats.find(i=>i.includes(t)));return this.sourceList.getFormats(e,s,this.isCritical)}},methods:{onLoad(e){this.$emit("load",e)}}};function be(e,s,t,i,n,r){const o=H("picture-source"),a=H("base-image");return p(),S("picture",{class:L([i.classNames.picture,"nuxt-booster-picture"])},[(p(!0),S(le,null,ue(r.formatSources,c=>(p(),de(o,{key:c.key,source:c,crossorigin:t.crossorigin},null,8,["source","crossorigin"]))),128)),he(a,{class:L(i.classNames.image),title:t.title,alt:t.alt,crossorigin:t.crossorigin,width:"0",height:"0",onLoad:r.onLoad},null,8,["class","title","alt","crossorigin","onLoad"])],2)}const j=N(Pe,[["render",be],["__scopeId","data-v-f1e45e8c"]]),Ve={inheritAttrs:!1,props:{hydrate:{type:Boolean,default:!0}},setup(){const{isCritical:e}=A();return{isCritical:e}},render(){return this.hydrate?w(j,{...this.$attrs,critical:this.isCritical}):w(pe,{never:!0},[w("noscript",{class:"nuxt-booster-picture-noscript"},[w(j,{...this.$attrs,critical:this.hydrate})])])}};export{Ve as _};
