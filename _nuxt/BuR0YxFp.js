var ge=Object.defineProperty;var pe=(i,e,t)=>e in i?ge(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t;var g=(i,e,t)=>pe(i,typeof e!="symbol"?e+"":e,t);import{i as P,am as ve,P as ye,a8 as we,an as _e,X as te,H as E,j as v,l as w,ao as V,f as U,D as se,c as H,o as B,m as $e,u as J,_ as re,a as Se,F as xe,z as Be,d as ie,A as X,s as k,E as ze}from"./B4ySdcMX.js";import{t as W,u as q,a as Ae,b as Me}from"./mLCKw9vV.js";import{g as ne}from"./C3-7UXtV.js";import{u as D}from"./Bknf1JWv.js";function Ne(i){return new URL(window.location.href)}const Pe=P({name:"HydrationWrapper",setup(i,{slots:e}){const t=e.default?e.default():[];return()=>Fe(t)}}),Fe=i=>i.length===1?i[0]:i,Y=["avif","webp","png","jpg","gif"],Ce="jpg",Oe=i=>{const{pathname:e}=we(i),n=(_e(e,{strict:!1})||"").match(/\.([^.]+)$/),s=n?n[1]:"";return s&&Y.includes(s)||Y.includes(s)?s:Ce};async function ke(i,e,t){window.Image?i=i.modify({src:e}):i=i.modify({src:ye(e)?e:ve(e,Ne().origin)});const{width:n,height:s}=await t.getImageSize(i.src);return i.modify({width:n,height:s})}class _{constructor({src:e,sizes:t,width:n,height:s,media:r="all",quality:d=70,format:m=void 0,preload:c=!1,modifiers:l={},provider:u=void 0,preset:a=void 0,densities:o=void 0}){g(this,"src");g(this,"media");g(this,"sizes");g(this,"width");g(this,"height");g(this,"format");g(this,"quality");g(this,"preload");g(this,"modifiers");g(this,"provider");g(this,"preset");g(this,"densities");this.src=e,this.sizes=t,this.media=r,this.width=n,this.height=s,this.format=Ie(e,m),this.quality=d,this.preload=c||!1,this.modifiers=l,this.provider=u,this.preset=a,this.densities=o}get key(){return W(JSON.stringify(this.toJSON()))}get ratio(){return(this.width??0)/(this.height??0)}get className(){return`image-${W(oe(this.src))}`}get style(){return`
      @supports (aspect-ratio: 1) {
        @media ${this.media} { .${this.className} { aspect-ratio: ${this.width} / ${this.height}; } }
      }
    `}getModifiers(){return{...this.modifiers,format:this.format,quality:this.quality}}getOptions(e){return{provider:this.provider,preset:this.preset,densities:this.densities||e.densities}}getMeta(e,t){return ke(new _({...this.toJSON()}),e,t)}getPreload(e,t,n){return{rel:"preload",as:"image",imagesrcset:e,imagesizes:t,media:this.media,crossorigin:n}}modify(e){return new _({...this.toJSON(),...e})}toJSON(){return{src:this.src,sizes:this.sizes,media:this.media,width:this.width,height:this.height,format:this.format,quality:this.quality,preload:this.preload,modifiers:this.modifiers,provider:this.provider,preset:this.preset,densities:this.densities}}static create(...e){return new this(...e)}}function Ie(i,e){const t=Oe(i);return e!=null&&e.includes(t)?t:e||t}function oe(i){if(i.startsWith("/"))return i;const e=new URL(i);return e.pathname+e.search+e.hash}function ae(i){return["anonymous","use-credentials",void 0].includes(i)}const Le={source:{type:[_,Object],default:null},title:{type:String,required:!0},alt:{type:String,default:null},crossorigin:{type:[Boolean,String],default(){},validator:ae}};var G={};const Re=["srcset","sizes","width","height","title","alt","loading","decoding","crossorigin"],He=P({inheritAttrs:!1,__name:"Base",props:Le,emits:["load"],async setup(i,{emit:e}){let t,n;const s=te(),r=i,d=e,m=D(),c=E().$booster,{isCritical:l}=q(),u=v(!0),a=v(),o=v(),p=v(),F=v(),C=v(),z=w(()=>ne(r.crossorigin||c.crossorigin)),T=w(()=>{var A;const f={loading:u.value};return(A=p.value)!=null&&A.className&&(f[p.value.className]=!0),f}),h=w(()=>{var f;return s.width||((f=a.value)==null?void 0:f.width)}),x=w(()=>{var f;return s.height||((f=a.value)==null?void 0:f.height)}),O=w(()=>l.value?"eager":"lazy"),me=w(()=>!r.source||new _(r.source).format!=="svg"?"async":"sync");function fe(f){u.value=!1,d("load",f.target)}if(r.source){p.value=V(new _(r.source)),o.value=m.getSizes(p.value.src,{sizes:p.value.sizes,modifiers:p.value.getModifiers(),...p.value.getOptions(c)}),F.value=o.value.srcset||o.value.src,C.value=o.value.sizes;const f=v({});if(U(()=>f.value),o.value&&o.value.src){try{a.value=V(([t,n]=se(()=>p.value.getMeta(o.value.src,c)),t=await t,n(),t))}catch(A){console.error(A)}f.value={style:[a.value&&Ae(p.value)].filter(Boolean),link:[!(!o.value||!l.value)&&G.prerender&&p.value.getPreload(o.value.srcset,o.value.sizes,z.value)].filter(Boolean),noscript:[G.prerender&&{key:"img-nojs",children:`<style>
img{content-visibility:unset!important}
</style>`}].filter(Boolean)}}}else u.value=!1;return(f,A)=>(B(),H("img",$e(J(s),{srcset:F.value,sizes:C.value,width:h.value,height:x.value,class:["nuxt-booster-image",T.value],title:f.title,alt:f.alt||f.title,loading:O.value,decoding:me.value,crossorigin:z.value,onLoad:fe}),null,16,Re))}}),je=re(He,[["__scopeId","data-v-29884a67"]]),ce=/(!?\(\s*min(-device)?-width)(.|\n)+\(\s*max(-device)?-width|\(\s*width\s*>(=)?(.|\n)+\(\s*width\s*<(=)?|(!?\(.*<(=)?\s*width\s*<(=)?)/i,Te=/\(\s*min(-device)?-width|\(\s*width\s*>(=)?/i,le=/(!?\(\s*max(-device)?-width)(.|\n)+\(\s*min(-device)?-width|\(\s*width\s*<(=)?(.|\n)+\(\s*width\s*>(=)?|(!?\(.*>(=)?\s*width\s*>(=)?)/i,We=/\(\s*max(-device)?-width|\(\s*width\s*<(=)?/i,M=j(ce,le,Te),I=j(le,ce,We),ue=/(!?\(\s*min(-device)?-height)(.|\n)+\(\s*max(-device)?-height|\(\s*height\s*>(=)?(.|\n)+\(\s*height\s*<(=)?|(!?\(.*<(=)?\s*height\s*<(=)?)/i,Ee=/\(\s*min(-device)?-height|\(\s*height\s*>(=)?/i,de=/(!?\(\s*max(-device)?-height)(.|\n)+\(\s*min(-device)?-height|\(\s*height\s*<(=)?(.|\n)+\(\s*height\s*>(=)?|(!?\(.*>(=)?\s*height\s*>(=)?)/i,Ue=/\(\s*max(-device)?-height|\(\s*height\s*<(=)?/i,N=j(ue,de,Ee),L=j(de,ue,Ue),$=/<(?!=)/,S=/>(?!=)/,K=/print/i,Z=/^print$/i,y=Number.MAX_VALUE;function R(i){let e=/(-?\d*\.?\d+)(ch|em|ex|px|rem)/.exec(i);if(e===null&&(M(i)||N(i))&&(e=/(\d)/.exec(i)),e==="0")return 0;if(e===null)return y;let t=e[1];switch(e[2]){case"ch":t=parseFloat(t)*8.8984375;break;case"em":case"rem":t=parseFloat(t)*16;break;case"ex":t=parseFloat(t)*8.296875;break;case"px":t=parseFloat(t);break}return+t}function j(i,e,t){return function(n){let s;return i.test(n)?s=!0:e.test(n)?s=!1:s=t.test(n),n.includes("not")?!s:s}}function b(i,e){const t=K.test(i),n=Z.test(i),s=K.test(e),r=Z.test(e);return t&&s?!n&&r?1:n&&!r?-1:i.localeCompare(e):t?1:s?-1:null}function Je(i){const t={}.unitlessMqAlwaysFirst;function n(s,r){const d=b(s,r);if(d!==null)return d;const m=M(s)||N(s),c=I(s)||L(s),l=M(r)||N(r),u=I(r)||L(r);if(t&&(!m&&!c||!l&&!u))return!m&&!c&&!l&&!u?s.localeCompare(r):!l&&!u?1:-1;{if(m&&u)return-1;if(c&&l)return 1;const a=R(s),o=R(r);if(a===y&&o===y)return s.localeCompare(r);if(a===y)return 1;if(o===y)return-1;if(a>o)return c?-1:1;if(a<o)return c?1:-1;if(a===o){if(c&&u){if($.test(s)&&!$.test(r))return 1;if(!$.test(s)&&$.test(r))return-1}if(m&&l){if(S.test(s)&&!S.test(r))return 1;if(!S.test(s)&&S.test(r))return-1}}return s.localeCompare(r)}}return n.desktopFirst=function(s,r){const d=b(s,r);if(d!==null)return d;const m=M(s)||N(s),c=I(s)||L(s),l=M(r)||N(r),u=I(r)||L(r);if(t&&(!m&&!c||!l&&!u))return!m&&!c&&!l&&!u?s.localeCompare(r):!l&&!u?1:-1;{if(m&&u)return 1;if(c&&l)return-1;const a=R(s),o=R(r);if(a===y&&o===y)return s.localeCompare(r);if(a===y)return 1;if(o===y)return-1;if(a>o)return c?-1:1;if(a<o)return c?1:-1;if(a===o){if(c&&u){if($.test(s)&&!$.test(r))return 1;if(!$.test(s)&&$.test(r))return-1}if(m&&l){if(S.test(s)&&!S.test(r))return 1;if(!S.test(s)&&S.test(r))return-1}}return-s.localeCompare(r)}},n}const qe=Je();class Q{constructor(e,t={}){g(this,"list",[]);g(this,"sort",!1);t=t||{},this.sort=t.sort||!1,this.list=this.list.concat(Array.from(e||this.list).map(n=>new _(n)))}get length(){return this.list.length}[Symbol.iterator](){return this.list.values()}get key(){return this.list.map(e=>e.key).join("-")}get sorted(){return this.sort?this.list.sort((e,t)=>qe(e.media||"",t.media||"")):this.list}get style(){return this.list.map(({media:e,width:t,height:n,style:s})=>`
      @media ${e} { .${this.className}::before { padding-top: calc((1 / (${t} / ${n})) * 100%); } }
      @supports (aspect-ratio: 1) {
        @media ${e} { .${this.className} { aspect-ratio: ${t} / ${n}; } }
      }
      ${s}
    `).reverse().join(" ")}get className(){return`picture-${W(this.sorted.map(({src:e})=>oe(e)).join(","))}`}get classNames(){return{picture:this.className,image:this.list.map(e=>e.className)}}getFormats(e,t,n){return this.sorted.reduce((s,r)=>s.concat(e.map(d=>r.modify({format:d,preload:d.includes(t)&&n}))),[])}async getMeta(e,t){const n=await Promise.all(this.sorted.map(s=>{const r=e.getSizes(s.src,{sizes:s.sizes,modifiers:s.getModifiers(),...s.getOptions(t)});return r.src?s.getMeta(r.src,t):(console.warn("No src found for source",s),s)}).filter(Boolean));return new Q(n)}toJSON(){return this.list}static create(...e){return new this(...e)}}var De={};const Qe=["srcset","sizes","media","type"],Ve=P({__name:"Source",props:{source:{type:_,required:!0},crossorigin:{type:[Boolean,String],default(){return null},validator:i=>["anonymous","use-credentials","",!0,!1,void 0].includes(i)}},setup(i){const e=new Map([["jpg","jpeg"]]),t=i,n=D(),s=E().$booster,r=n.getSizes(t.source.src,{sizes:t.source.sizes,modifiers:t.source.getModifiers(),...t.source.getOptions(s)}),d=v(r.srcset||r.src),m=v(t.source.format&&`image/${e.get(t.source.format)||t.source.format}`),c=w(()=>ne(t.crossorigin||s.crossorigin)),l=new _(t.source);return U(()=>({link:r&&l.preload&&d.value&&De.prerender?[l.getPreload(d.value,r.sizes,c.value)]:[]})),(u,a)=>(B(),H("source",{srcset:d.value,sizes:J(r).sizes,media:i.source.media,type:m.value},null,8,Qe))}}),he={sources:{type:Array,default(){return[]}},formats:{type:Array,default(){return null}},title:{type:String,default:null},alt:{type:String,default:null},crossorigin:{type:[Boolean,String],default(){return null},validator:ae},sortSources:{type:Boolean,default:!0}},Xe=P({__name:"Base",props:he,emits:["load"],async setup(i,{emit:e}){let t,n;const s=["avif","webp","png","jpg","gif"],r=i,d=e,{isCritical:m}=q(),c=D(),l=E().$booster,u=Q.create(r.sources,{sort:r.sortSources}),a=v(),o=r.formats||l.targetFormats,p=Array.from(new Set(s.map(h=>o.find(x=>x.includes(h))))).filter(Boolean),F=s.find(h=>o.find(x=>x.includes(h))),C=v(u.getFormats(p,F,m.value)),z=w(()=>{var h;return((h=a.value)==null?void 0:h.classNames)||{picture:"",image:[]}}),T=h=>{d("load",h)};U(()=>{if(a.value&&a.value.length){const h=a.value.classNames;return{style:[Me(a.value,h)]}}return{}});try{a.value=([t,n]=se(()=>u.getMeta(c,l)),t=await t,n(),t)}catch(h){console.error(h)}return(h,x)=>(B(),H("picture",{class:X([z.value.picture,"nuxt-booster-picture"])},[(B(!0),H(xe,null,Be(C.value,O=>(B(),ie(Ve,{key:O.key,source:O,crossorigin:h.crossorigin},null,8,["source","crossorigin"]))),128)),Se(je,{class:X(z.value.image),title:h.title,alt:h.alt,crossorigin:h.crossorigin,width:"0",height:"0",onLoad:T},null,8,["class","title","alt","crossorigin"])],2))}}),ee=re(Xe,[["__scopeId","data-v-63f9dbe3"]]),et=P({__name:"BoosterPicture",props:{hydrate:{type:Boolean,default:!0},...he},setup(i){const e=i,t=te(),{isCritical:n}=q(),s=w(()=>e.hydrate?k(ee,{...t,...e,hydrate:void 0,critical:n.value}):k(Pe,{},[k("noscript",{class:"nuxt-booster-picture-noscript"},[k(ee,{...t,...e,hydrate:void 0,critical:e.hydrate})])]));return(r,d)=>(B(),ie(ze(J(s))))}});export{et as _};
